<!DOCTYPE html>
<html lang="en_US">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/jquery-ui.min.css" rel="stylesheet" media="all" />
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Poppins:400,400i,700,700i' rel='stylesheet' type='text/css'>
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/bootstrap.min.css" rel="stylesheet" media="all"/>
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/tooltipster.bundle.min.css" rel="stylesheet" media="all"/>
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/perfect-scrollbar.min.css" rel="stylesheet" media="all">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/modern.css" rel="stylesheet" media="all">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/spectrum.css" rel="stylesheet" media="all">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/modern-additional.css" rel="stylesheet" media="all">
        <!-- <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/modern-rtl.css" rel="stylesheet" media="all"> -->
        <link type="text/css" href="./assets/css/custom.css" rel="stylesheet" media="all">
        <link type="text/css" href="https://d2lp2jhrzjca64.cloudfront.net/assets/css/modern-print-option.css" rel="stylesheet" media="all">
        <link rel="shortcut icon" href="#">
    </head>
    <body ng-app="nbd-app" class="nbd-mode-modern">
        <div style="width: 100%; height: 100%; display: block!important;" ng-controller="designCtrl" ng-click="wraperClickHandle($event)" keypress ng-cloak>
            <div id="design-container">
                <div class="container-fluid" id="designer-controller">
                    <div class="nbd-navigations">
                        <div class="nbd-main-bar">
                            <i class="icon-nbd icon-nbd-menu menu-mobile"></i>
                            <ul class="nbd-main-menu menu-left">
                                <li class="menu-item item-edit">
                                    <span class="nbd-close close-designtool" title="Close">
                                        <i class="icon-nbd icon-nbd-fomat-highlight-off icon-close" ng-click="closeDesignTool()"></i>
                                    </span>
                                </li>
                                
                                <li class="menu-item item-edit" style="padding-left: 15px; padding-right: 15px"><img src="./assets/image/logo_noir.png" style="max-height: 30px" /></li>
                                <li class="menu-item item-edit">
                                    <span>File</span>
                                    <div class="sub-menu" data-pos="left">
                                        <ul>
                                            <li class="sub-menu-item flex space-between item-import-file" ng-click="importDesign()">
                                                <span>Import Design</span>
                                                <small>{{ 'M-S-I' | keyboardShortcut }}</small>
                                            </li>
                                            <li class="sub-menu-item flex space-between" ng-click="exportDesign()">
                                                <span>Export Design</span>
                                                <small>{{ 'M-S-E' | keyboardShortcut }}</small>
                                            </li>
                                        </ul>
                                    </div>
                                    <div id="nbd-overlay"></div>
                                </li>
                                <li class="menu-item item-edit">
                                    <span>Edit</span>
                                    <div class="sub-menu" data-pos="left">
                                        <ul>
                                            <li class="sub-menu-item flex space-between" ng-click="_clearAllStage()">
                                                <span>Clear all design</span>
                                                <small>{{ 'M-E' | keyboardShortcut }}</small>
                                            </li>
                                        </ul>
                                    </div>
                                    <div id="nbd-overlay"></div>
                                </li>
                            </ul>
                            <ul class="nbd-main-menu menu-center">
                                <li class="menu-item undo-redo" ng-click="undo()" ng-class="stages[currentStage].states.isUndoable ? 'in' : 'nbd-disabled'">
                                    <i class="icon-nbd-baseline-undo" ></i>
                                    <span class="nbd-font-size-12">Undo</span>
                                </li>
                                <li class="menu-item undo-redo" ng-click="redo()" ng-class="stages[currentStage].states.isRedoable ? 'in' : 'nbd-disabled'">
                                    <i class="icon-nbd-baseline-redo" ></i>
                                    <span class="nbd-font-size-12">Redo</span>
                                </li>
                            </ul>
                            <ul class="nbd-main-menu menu-right">
                                <li class="menu-item item-title animated slideInDown animate600 ipad-mini-hidden">
                                    <input type="text" name="title" class="title" placeholder="Title" ng-model="stages[currentStage].config.name"/>
                                </li>
                                <li ng-if="settings.nbdesigner_show_button_change_product == 'yes'" ng-click="showProducts()" class="menu-item nbd-change-product nbd-show-popup-products animated slideInDown animate700 main-menu-action" >
                                    Change Product 
                                    <i class="nbd-svg-icon" >
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>
                                    </i>
                                </li>
                                <li class="menu-item item-process animated slideInDown animate900 save-data" data-overlay="overlay" 
                                    ng-click="saveData()"
                                    data-tour="process" data-tour-priority="7" ng-style="{'background-color': customSettings.processBtnBgColor }">
                                    <span ng-if="settings.task == 'new'">Process</span>
                                    <span ng-if="settings.task == 'edit'">Save Designs</span>
                                    <span ng-if="settings.task == 'create_template'">Create Template</span>
                                    <span ng-if="settings.task == 'edit_template'">Save Template</span>
                                    <i class="icon-nbd icon-nbd-arrow-upward rotate90"></i>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="nbd-workspace">
                        <div class="nbd-sidebar">
                            <div class="tabs-nav">
                                <ul class="main-tabs" data-tab="tab-1">
                                    <div id="selectedTab"><span></span><span></span></div>
                                    <li class="tab layerTab active animated animate300" id="design-tab">
                                        <img class="sidebar-icon" src="./assets/image/design.png" />
                                        <span>Design</span>
                                    </li>
                                    <li id="nav-cliparts" data-tour="products" data-tour-priority="1" ng-click="disableDrawMode();disablePreventClickMode();getProducts()" class="tab animated slideInLeft animate600 tab-product">
                                        <img class="sidebar-icon" src="./assets/image/product.png" />
                                        <span>Product</span>
                                    </li>
                                    <li id="nav-templates" data-tour="templates" data-tour-priority="2" ng-click="disableDrawMode();disablePreventClickMode();getTemplatesBySide()" ng-class="active" class="tab active tab-first animated slideInLeft animate400">
                                        <img class="sidebar-icon" src="./assets/image/template.png" />
                                        <span>Styles</span>
                                    </li>
                                    <li id="nav-typos" data-tour="typos" data-tour-priority="3" ng-click="disableDrawMode();disablePreventClickMode(); getResource('typography', '#tab-typography')" class="tab animated slideInLeft animate500">
                                        <img class="sidebar-icon" src="./assets/image/text.png" />
                                        <span>Text</span>
                                    </li>
                                    <li id="nav-cliparts" data-tour="cliparts" data-tour-priority="4" ng-click="disableDrawMode();disablePreventClickMode();getResource('clipart', '#tab-svg', true)" class="tab animated slideInLeft animate600 tab-clipart">
                                        <img class="sidebar-icon" src="./assets/image/elements.png" />
                                        <span>&#201;lements</span>
                                    </li>
                                    <li id="nav-photos" data-tour="photos" data-tour-priority="5" class="tab animated slideInLeft animate700" ng-click="disableDrawMode();disablePreventClickMode()">
                                        <img class="sidebar-icon" src="./assets/image/image.png" />
                                        </i><span>Upload</span>
                                    </li>
                                    <!-- <li id="nav-elements" data-tour="elements" data-tour-priority="5" class="tab animated slideInLeft animate800" ng-click="disableDrawMode();disablePreventClickMode()">
                                        <i class="icon-nbd icon-nbd-geometrical-shapes-group"></i><span>Elements</span>
                                    </li> -->
                                    <!-- <li id="nav-layers" data-tour="layers" data-tour-priority="6" class="tab animated slideInLeft animate900" ng-click="disableDrawMode();disablePreventClickMode()">
                                        <i class="icon-nbd icon-nbd-stack"></i><span>Layers</span>
                                    </li> -->
                                    <li id="nav-end" class="tab tab-end" ></li>
                                </ul>
                                <div class="keyboard-shortcuts"><i class="icon-nbd icon-nbd-info-circle nbd-tooltip-hover tooltipstered nbd-hover-shadow"></i></div>
                                <div class="nbd-sidebar-close"><i class="icon-nbd icon-nbd-clear"></i></div>
                            </div>
                            <div class="tabs-content">
                                <i class="fa fa-times" aria-hidden="true"></i>
                                <span class="hide-tablet"><i class="icon-nbd icon-nbd-fomat-top-left rotate-135"></i></span>

                                <!-- tab-product -->
                                <div class="tab active tab-first" id="tab-product" nbd-scroll="scrollLoadMoreProduct(container, type)" data-container="#tab-product" data-type="product" data-offset="20">
                                    <h4><b>Products</b></h4>
                                    <div class="tab-main tab-scroll">
                                        <div class="nbd-products">
                                            <div class="nbd-products-container">
                                                <div class="nbd-product" title="Select Product" ng-click="changeProduct( product.id )" ng-repeat="product in resource.products.filtereProducts">
                                                    <div class="nbd-product-wrap">
                                                        <div class="nbd-product-image" ng-style="{'background-image': 'url(' + product.product_image.url + ')'}"></div>
                                                        <div class="nbd-product-title">
                                                            <a href="#">
                                                                {{product.name}}
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="loading-photo" >
                                                <svg class="circular" viewBox="25 25 50 50">
                                                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                </svg>
                                            </div>
                                            <div class="tab-load-more ng-hide" ng-show="!resource.products.onload && ( resource.products.next || 
                                            resource.products.total > resource.products.currentPage * resource.products.perPage )">
                                                <a class="nbd-button" ng-click="scrollLoadMoreProduct()">Load more</a>
                                            </div>
                                        </div>
                                        <div ng-if="resource.products.filtereProducts.length == 0 && !resource.products.onload" class="nbd-products">
                                            No results!
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab-products -->

                                <!-- Tab Template -->
                                <div class="tab" id="tab-product-template" nbd-scroll="scrollLoadMoreTemp()" data-container="#tab-product-template" data-type="globalTemplate" data-offset="30">
                                     <div class="tab-template show" id="tab-template">
                                        <h4 ng-show="settings.is_admin"><b>Default templates</b></h4>
                                        <div class="tab-main tab-scroll">
                                            <div class="nbd-templates">
                                                <div class="main-items">
                                                    <div class="items">
                                                        <div ng-if="!settings.is_admin" class="item" ng-repeat="temp in resource.templates.filtereTemps" ng-click="insertGlobalTemplate(temp.id)">
                                                            <div class="main-item">
                                                                <div class="item-img" nbd-template-hover="{{temp.id}}">
                                                                    <img ng-src="{{temp.preview_image.url ? temp.preview_image.url : temp.template_image.url}}" alt="{{temp.preview_image.alt ? temp.preview_image.alt : temp.template_image.alt}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="settings.is_admin" class="item" ng-repeat="temp in resource.templates.filtereTemps" ng-click="insertGlobalTemplateDefault(temp.id)">
                                                            <div class="main-item">
                                                                <div class="item-img" nbd-template-hover="{{temp.id}}">
                                                                    <img ng-src="{{temp.preview_image.url ? temp.preview_image.url : temp.template_image.url}}" alt="{{temp.preview_image.alt ? temp.preview_image.alt : temp.template_image.alt}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="pointer"></div>
                                                </div>
                                                <div class="loading-photo" >
                                                    <svg class="circular" viewBox="25 25 50 50">
                                                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                    </svg>
                                                </div>
                                                <div class="tab-load-more ng-hide" ng-show="!resource.templates.onload && ( resource.templates.next || 
                                                resource.templates.total > resource.templates.currentPage * resource.templates.perPage )">
                                                    <a class="nbd-button" ng-click="scrollLoadMoreTemp()">Load more</a>
                                                </div>
                                            </div>
                                            <div ng-if="resource.templates.filtereTemps.length == 0  && !resource.products.onload" class="nbd-templates">
                                                No results!
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end Tab Template -->

                                <!-- Tab Typography -->
                                <div class="tab" ng-if="settings['nbdesigner_enable_text'] == 'yes'" id="tab-typography" nbd-scroll="scrollLoadMore(container, type)" data-container="#tab-typography" data-type="typography" data-offset="20">
                                    <div class="tab-main tab-scroll">
                                        <div class="typography-head">
                                            <span class="text-guide" >Click to add text</span>
                                            <div class="head-main">
                                                <span class="text-heading" ng-click='addText("Heading", "heading")' >Add heading</span>
                                                <span class="text-sub-heading" ng-click="addText('Subheading', 'subheading')" >Add subheading</span>
                                                <span ng-click="addText('Add a little bit of body text')" class="text-body" >Add a little bit of body text</span>
                                                <span ng-show="settings.nbdesigner_enable_curvedtext == 'yes'" ng-click="addCurvedText('Curved text')" class="text-body text-curved">Add curved text</span>
                                            </div>
                                        </div>
                                        <hr class="seperate" ng-if="settings.nbdesigner_hide_typo_section == 'no'" />
                                        <div ng-if="settings.nbdesigner_hide_typo_section == 'no'" class="typography-body">
                                            <ul class="typography-items">
                                                <li nbd-drag="typo.folder" type="typo" ng-click="insertTypography(typo)" class="typography-item" ng-repeat="typo in resource.typography.data | limitTo: resource.typography.filter.currentPage * resource.typography.filter.perPage" repeat-end="onEndRepeat('typography')">
                                                    <img ng-src="{{generateTypoLink(typo)}}" alt="Typography" />
                                                </li>
                                            </ul>
                                            <div class="loading-photo" >
                                                <svg class="circular" viewBox="25 25 50 50">
                                                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab Typography -->

                                <!-- tab-clipart -->
                                <div class="tab nbd-onload" ng-if="settings['nbdesigner_enable_clipart'] == 'yes'" id="tab-svg" nbd-scroll="scrollLoadMore(container, type)" data-container="#tab-svg" data-type="clipart" data-offset="20">
                                    <div class="nbd-search">
                                        <input type="text" name="search" placeholder="Search clipart" ng-model="resource.clipart.filter.search"/>
                                        <i class="icon-nbd icon-nbd-fomat-search"></i>
                                    </div>
                                    <div class="nbd-tab-contents">
                                        <div class="nbd-tab-content active" id="default-clipart-tab">
                                            <div class="tab-main tab-scroll">
                                                <button class="clipart-prev" aria-label="Preview" type="button">
                                                    <span aria-hidden="true">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                            <path fill="currentColor" d="M15.45 17.97 9.5 12.01a.25.25 0 0 1 0-.36l5.87-5.87a.75.75 0 0 0-1.06-1.06l-5.87 5.87c-.69.68-.69 1.8 0 2.48l5.96 5.96a.75.75 0 0 0 1.06-1.06z"></path>
                                                        </svg>
                                                    </span>    
                                                </button>
                                                <div class="nbd-items-dropdown" >
                                                    <div class="clipart-wrap">
                                                        <div class="clipart-item in-view" nbd-drag="art.url" extenal="false" type="svg"  ng-repeat="art in resource.clipart.filteredArts | limitTo: resource.clipart.filter.currentPage * resource.clipart.filter.perPage" repeat-end="onEndRepeat('clipart')">
                                                            <img  ng-src="{{art.url}}" ng-click="addArt(art, true, true)" alt="{{art.name}}">
                                                        </div>
                                                    </div>
                                                    <div class="loading-photo" >
                                                        <svg class="circular" viewBox="25 25 50 50">
                                                            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <button class="clipart-next" aria-label="Next" type="button">
                                                    <span aria-hidden="true">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                            <path fill="currentColor" d="m8.55 5.78 5.96 5.97c.1.1.1.25 0 .35l-5.87 5.87a.75.75 0 0 0 1.06 1.06l5.87-5.87c.69-.68.69-1.79 0-2.47L9.61 4.72a.75.75 0 0 0-1.06 1.06z"></path>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab-clipart -->

                                <!-- tab-photo.php -->
                                <div class="tab" ng-if="settings['nbdesigner_enable_image'] == 'yes'" id="tab-photo" nbd-scroll="scrollLoadMore(container, type)" data-container="#tab-photo" data-type="photo" data-offset="30">
                                    <div class="tab-main tab-scroll">
                                        <div class="nbd-items-dropdown">
                                            <div class="result-tab-upload">
                                                <div class="content-items">
                                                    <div class="content-item type-url" data-type="image-url">
                                                        <div class="form-group">
                                                            <label>Image Url</label>
                                                            <div class="input-group">
                                                                <input nbd-capture="addImageFromClipboard(file, type)" class="image-url" type="text" name="image-url" ng-model="resource.imageFromUrl" placeholder="Enter image url, allow: jpg, png, svg"/>
                                                                <button ng-class="resource.imageFromUrl !='' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="resource.addImageContext = 'manual'; addImageFromUrl(resource.imageFromUrl);">insert</button>
                                                            </div>
                                                        </div>
                                                        <!-- <div ng-show="settings['nbdesigner_enable_svg_code'] == 'yes'" class="svg-code-editor-wrap">
                                                            <div class="form-group">
                                                                <label>SVG Code</label>
                                                                <textarea class="form-control hover-shadow nbdesigner_svg_code" rows="10" ng-model="resource.svgCode"  placeholder="Enter svg code"></textarea>
                                                                <button ng-class="resource.svgCode !='' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="addSvgFromString(resource.svgCode)">Insert SVG</button>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                    <div ng-class="settings['nbdesigner_upload_show_term'] !== 'yes' ? 'accept' : '' " class="content-item type-upload" data-type="image-upload">
                                                        <div ng-hide="settings.nbdesigner_upload_designs_php_logged_in == 'yes' && !settings.is_logged">
                                                            <div class="nbd-progress-bar">
                                                                <div class="nbd-progress-bar-inner" ng-style="{'width': resource.upload.progressBar + '%'}">
                                                                    <span class="indicator" ng-style="{'left': 'calc(' + resource.upload.progressBar + '% - 15px)'}">{{resource.upload.progressBar}}</span>
                                                                </div>
                                                            </div>
                                                            <div class="form-upload nbd-dnd-file" nbd-dnd-file="uploadFile(files)">
                                                                <i class="icon-nbd icon-nbd-cloud-upload"></i>
                                                                <span>Click or drop images here</span>
                                                                <input type="file" style="display: none;" multiple/>
                                                            </div>
                                                            <div class="allow-size">
                                                                <span>Accept file types: <strong>{{settings.product_data.option.allowed_file_types_show}}</strong></span>
                                                                <span>Max file size: <strong>{{settings['nbdesigner_maxsize_upload']}} MB</strong></span>
                                                                <span>Min file size: <strong>{{settings['nbdesigner_minsize_upload']}} MB</strong></span>
                                                                <span ng-if="settings.nbdesigner_upload_multiple_images == 'yes'">Max upload files: <strong>{{settings['nbdesigner_max_upload_files_at_once']}}</strong></span>
                                                            </div>
                                                            <div class="nbd-term" ng-if="settings['nbdesigner_upload_show_term'] == 'yes'">
                                                                <div class="nbd-checkbox">
                                                                    <input id="accept-term" type="checkbox">
                                                                    <label for="accept-term">&nbsp;</label>
                                                                </div>
                                                                <span class="term-read">I accept the terms</span>
                                                            </div>
                                                            <div id="nbd-upload-wrap">
                                                                <div class="mansory-wrap">
                                                                    <div nbd-drag="img.url" nbd-img="img" extenal="false" type="image" class="mansory-item" ng-click="resource.addImageContext = 'manual'; addImageFromUrl(img, false, img.ilr);" ng-repeat="img in resource.upload.data track by $index" repeat-end="onEndRepeat('upload')"><img ng-src="{{img.url}}"></div>
                                                                </div>
                                                            </div>
                                                            <div class="clear-local-images-wrap" ><span ng-click="_localStorage.delete('nbduploaded')">Clear all uploaded images</span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nbdesigner-gallery" id="nbdesigner-gallery">
                                                    <div nbd-drag="img.url" extenal="true" type="image" class="nbdesigner-item" ng-click="resource.addImageContext = 'manual'; addImageFromUrl(img.url)" ng-repeat="img in resource.photo.data" repeat-end="onEndRepeat('photo')"><img ng-src="{{img.preview}}"><span class="photo-desc">{{img.des}}</span></div>
                                                </div>
                                                <div class="loading-photo" >
                                                    <svg class="circular" viewBox="25 25 50 50">
                                                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                    </svg>
                                                </div>
                                                <div class="tab-load-more" style="display: none;" ng-show="!resource.photo.onload && resource.photo.data.length && (resource.photo.filter.totalPage == 0 || resource.photo.filter.currentPage < resource.photo.filter.totalPage)">
                                                    <a class="nbd-button" ng-click="scrollLoadMore('#tab-photo', 'photo')">Load more</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab-photo -->

                                <!-- tab-elements -->
                                <div class="tab" id="tab-element" nbd-scroll="scrollLoadMore(container, type)" data-container="#tab-element" data-type="element" data-offset="20">
                                    <div class="nbd-search">
                                        <input ng-class="(!(resource.element.type == 'icon' || resource.element.type == 'flaticon' || resource.element.type == 'storyset') || !resource.element.onclick) ? 'nbd-disabled' : ''" ng-keyup="$event.keyCode == 13 && getMedia(resource.element.type, 'search')" type="text" name="search" placeholder="Search element" ng-model="resource.element.contentSearch"/>
                                        <i class="icon-nbd icon-nbd-fomat-search"></i>
                                    </div>     
                                    <div class="tab-main tab-scroll" >
                                        <div class="nbd-items-dropdown">
                                            <div class="main-items">
                                                <div class="items">
                                                    <div ng-if="settings.elements.draw" class="item" data-type="draw" data-api="false" ng-click="onClickTab('draw', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon"><i class="icon-nbd icon-nbd-drawing"></i></div>
                                                            <div class="item-info">
                                                                <span class="item-name">Draw</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.shapes" class="item" data-type="shapes" data-api="false" ng-click="onClickTab('shape', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon"><i class="icon-nbd icon-nbd-shapes"></i></div>
                                                            <div class="item-info">
                                                                <span class="item-name">Shapes</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.icons" class="item" data-type="icons" data-api="false" ng-click="onClickTab('icon', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon"><i class="icon-nbd icon-nbd-diamond"></i></div>
                                                            <div class="item-info">
                                                                <span class="item-name">Icons</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.flaticon && resource.flaticon.token" class="item" data-type="flaticon" data-api="false" ng-click="onClickTab('flaticon', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon" style="padding: 20px 5px">
                                                                <i class="icon-nbd" style="font-size: 30px;background: #0E2A47;padding: 0 5px;border-radius: 4px;">
                                                                    <svg style="vertical-align: middle;" width="60px" viewBox="0 0 561 103" xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M141.596 29.675c0-3.777 2.985-6.767 6.764-6.767h34.438a6.115 6.115 0 016.15 6.15 6.11 6.11 0 01-6.15 6.149h-27.674v13.091h23.719a6.112 6.112 0 016.151 6.15 6.109 6.109 0 01-6.151 6.149h-23.719v17.574c0 3.773-2.986 6.761-6.764 6.761-3.779 0-6.764-2.989-6.764-6.761V29.675zm52.248-.526c0-3.781 2.985-6.767 6.764-6.767 3.776 0 6.763 2.985 6.763 6.767v42.957h25.039a6.114 6.114 0 016.149 6.153 6.112 6.112 0 01-6.149 6.15h-31.802c-3.779 0-6.764-2.986-6.764-6.768V29.149zm48.047 46.561l21.438-48.407c1.492-3.341 4.215-5.357 7.906-5.357h.792c3.686 0 6.323 2.017 7.815 5.357l21.439 48.407c.436.967.701 1.845.701 2.723 0 3.602-2.809 6.501-6.414 6.501-3.161 0-5.269-1.845-6.499-4.655l-4.132-9.661h-27.059l-4.301 10.102c-1.144 2.631-3.426 4.214-6.237 4.214-3.517 0-6.24-2.81-6.24-6.325 0-.969.351-1.932.791-2.899zm38.041-17.044l-8.521-20.297-8.526 20.297h17.047zm34.932-23.279H301.86c-3.429 0-6.239-2.813-6.239-6.238 0-3.429 2.811-6.24 6.239-6.24h39.533c3.426 0 6.237 2.811 6.237 6.24 0 3.425-2.811 6.238-6.237 6.238h-13.001v42.785c0 3.773-2.99 6.761-6.764 6.761-3.779 0-6.764-2.989-6.764-6.761V35.387z" fill="#FFF"/><path d="M352.615 29.149c0-3.781 2.985-6.767 6.767-6.767 3.774 0 6.761 2.985 6.761 6.767v49.024a6.711 6.711 0 01-6.761 6.761c-3.781 0-6.767-2.989-6.767-6.761V29.149zm21.517 24.687v-.179c0-17.481 13.178-31.801 32.065-31.801 9.22 0 15.459 2.458 20.557 6.238 1.402 1.054 2.637 2.985 2.637 5.357 0 3.692-2.985 6.59-6.681 6.59-1.845 0-3.071-.702-4.044-1.319-3.776-2.813-7.729-4.393-12.562-4.393-10.364 0-17.831 8.611-17.831 19.154v.173c0 10.542 7.291 19.329 17.831 19.329 5.715 0 9.492-1.756 13.359-4.834 1.049-.874 2.458-1.491 4.039-1.491 3.429 0 6.325 2.813 6.325 6.236 0 2.106-1.056 3.78-2.282 4.834-5.539 4.834-12.036 7.733-21.878 7.733-18.095.001-31.535-13.97-31.535-31.627zm58.877 0v-.179c0-17.481 13.79-31.801 32.766-31.801 18.981 0 32.592 14.143 32.592 31.628v.173c0 17.483-13.785 31.807-32.769 31.807-18.973 0-32.589-14.144-32.589-31.628zm51.215 0v-.179c0-10.539-7.725-19.326-18.626-19.326-10.893 0-18.449 8.611-18.449 19.154v.173c0 10.542 7.73 19.329 18.626 19.329 10.901-.001 18.449-8.609 18.449-19.151zm22.009-24.515c0-3.774 2.99-6.763 6.767-6.763h1.401c3.252 0 5.183 1.583 7.029 3.953l26.093 34.265V29.059a6.675 6.675 0 016.681-6.677 6.672 6.672 0 016.671 6.677v48.934c0 3.78-2.987 6.765-6.764 6.765h-.436c-3.257 0-5.188-1.581-7.034-3.953l-27.056-35.492v32.944a6.676 6.676 0 01-13.351 0V29.321h-.001z" fill="#69E781"/><path d="M48.372 56.137h12.517L72.045 37.6H37.186L25.688 18.539h57.825L94.668 0H9.271a9.265 9.265 0 00-8.073 4.716 9.265 9.265 0 00.134 9.343l50.38 83.501a9.266 9.266 0 007.938 4.476 9.264 9.264 0 007.935-4.476l2.898-4.804-22.111-36.619z" fill="#FFF"/><path d="M93.575 18.539h.031v.004l21.652.004 2.705-4.488a9.262 9.262 0 00.133-9.343A9.26 9.26 0 00110.026 0h-5.294L93.575 18.539zm-5.284 8.817l-23.566 39.13 10.794 17.918 34.423-57.048z" fill="#69E781"/></g></svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">Flaticon</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.storyset" class="item" data-type="storyset" data-api="false" ng-click="onClickTab('storyset', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon" style="padding: 20px 5px">
                                                                <i class="icon-nbd" style="font-size: 30px;background: #0c4584;padding: 0 5px;border-radius: 4px;">
                                                                    <svg viewBox="0 0 299 65" fill="none" style="vertical-align: middle;" width="60px" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M42.3804 25.81C39.1335 24.2193 35.5927 23.3171 31.9804 23.16C28.6504 23.16 26.9804 24.33 26.9804 26.16C26.9804 27.99 29.3304 28.51 32.2904 28.95L35.1904 29.39C42.2504 30.46 46.1904 33.62 46.1904 39.14C46.1904 45.87 40.6704 50.21 31.1904 50.21C26.7404 50.21 20.9204 49.37 16.6904 46.37L20.1504 39.71C23.4309 41.898 27.3087 43.016 31.2504 42.91C35.3204 42.91 37.2504 41.77 37.2504 39.85C37.2504 38.27 35.6104 37.39 31.8404 36.85L29.1804 36.48C21.6404 35.48 17.9104 32.14 17.9104 26.59C17.9104 19.9 23.0904 15.93 31.6704 15.93C36.3969 15.8411 41.0743 16.9015 45.3004 19.02L42.3804 25.81Z" fill="#F8FAFB"/>
                                                                        <path d="M76.4204 26.35H64.6104V36.44C64.6104 40.51 66.7604 42 69.4904 42C71.7584 41.798 73.9406 41.0351 75.8404 39.78L78.8404 46.78C75.6968 49.0428 71.9136 50.2444 68.0404 50.21C59.9604 50.21 55.8304 45.63 55.8304 37.21V26.35H48.4404L51.7404 18.54H55.8304V7.07999H64.6104V18.54H76.4204V26.35Z" fill="#F8FAFB"/>
                                                                        <path d="M117.02 33.01C117.02 42.84 109.51 50.17 99.3503 50.17C89.1903 50.17 81.7803 42.84 81.7803 33.01C81.7803 23.18 89.2503 15.85 99.3703 15.85C109.49 15.85 117.02 23.19 117.02 33.01ZM90.7103 33.01C90.7103 38.29 94.4103 42.01 99.3503 42.01C104.29 42.01 108.03 38.3 108.03 33.01C108.03 27.72 104.3 24.01 99.3503 24.01C94.4003 24.01 90.7103 27.75 90.7103 33.01Z" fill="#F8FAFB"/>
                                                                        <path d="M161.52 62.92H151.9L163.3 42.4L149.24 16.75H159.24L168.24 33.5L176.83 16.75H186.45L161.52 62.92Z" fill="#F8FAFB"/>
                                                                        <path d="M146.72 17.42L143.14 25.61C141.731 24.9428 140.19 24.601 138.63 24.61C134.43 24.61 131.57 27.17 131.57 32.09V50.21H122.57V16.9H131.28V20.59C133.33 17.42 136.6 16.08 140.7 16.08C142.772 16.152 144.813 16.6064 146.72 17.42V17.42Z" fill="#F8FAFB"/>
                                                                        <path d="M7.44024 21.6H0.240234C0.248171 15.9003 2.51589 10.4363 6.5462 6.40598C10.5765 2.37566 16.0405 0.107943 21.7402 0.100006V7.29999C17.9525 7.31578 14.3244 8.82747 11.6461 11.5058C8.9677 14.1842 7.45603 17.8123 7.44024 21.6V21.6Z" fill="#1273EB"/>
                                                                        <path d="M291.321 43.3H298.521C298.513 48.9997 296.245 54.4637 292.215 58.494C288.184 62.5243 282.72 64.7921 277.021 64.8V57.6C278.903 57.6174 280.771 57.2593 282.513 56.5468C284.256 55.8343 285.839 54.7817 287.171 53.4503C288.502 52.119 289.555 50.5356 290.267 48.7928C290.98 47.0501 291.338 45.1827 291.321 43.3V43.3Z" fill="#1273EB"/>
                                                                        <path d="M212.3 24C209.166 22.0507 205.551 21.012 201.86 21C197.31 21 194.31 22.92 194.31 26C194.31 28.66 196.63 30 200.81 30.48L204.58 30.95C211.36 31.83 215.3 34.62 215.3 39.85C215.3 45.91 209.84 49.72 201.3 49.72C196.543 49.8103 191.88 48.381 187.99 45.64L190.32 41.87C192.74 43.75 195.98 45.34 201.37 45.34C206.76 45.34 210.16 43.55 210.16 40.18C210.16 37.62 208 36.07 203.49 35.53L199.68 35.1C192.5 34.22 189.14 31.02 189.14 26.27C189.14 20.27 194.22 16.6 201.87 16.6C206.339 16.5192 210.736 17.7236 214.54 20.07L212.3 24Z" fill="#F8FAFB"/>
                                                                        <path d="M250.52 33.06C250.523 33.6914 250.49 34.3225 250.42 34.95H224.85C225.56 41.82 230.38 45.36 236.14 45.36C239.896 45.3576 243.51 43.9277 246.25 41.36L248.94 44.8C247.204 46.4725 245.148 47.7773 242.895 48.6365C240.642 49.4956 238.239 49.8913 235.83 49.8C226.4 49.8 219.7 43.1 219.7 33.23C219.7 23.36 226.44 16.62 235.53 16.62C244.19 16.59 250.46 23.36 250.52 33.06ZM224.92 30.87H245.4C244.76 24.87 240.86 21.07 235.4 21.07C229.53 21.07 225.78 25.11 224.92 30.87Z" fill="#F8FAFB"/>
                                                                        <path d="M278.21 22.75H264.43V37.86C264.43 42.86 267.06 45.03 270.77 45.03C273.183 44.9925 275.524 44.2063 277.47 42.78L279.83 46.58C277.113 48.6586 273.781 49.7738 270.36 49.75C263.49 49.75 259.41 45.98 259.41 37.96V22.75H252.41V18.21H259.41V8.07999H264.41V18.23H278.19L278.21 22.75Z" fill="#F8FAFB"/>
                                                                    </svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">Stories</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.qrcode" class="item" data-type="qr-code" data-api="false" ng-click="onClickTab('qrcode', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon"><i class="icon-nbd icon-nbd-qrcode"></i></div>
                                                            <div class="item-info">
                                                                <span class="item-name">Bar/QR-Code</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.vcard && settings.vcard_fields.length > 0" class="item" data-type="vcard" data-api="false" ng-click="onClickTab('vcard', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon">
                                                                <i class="icon-vcard">
                                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                                                                        <path fill="#06d79c" d="M28 25h-3v-1c0.553 0 1-0.448 1-1 0-0.553-0.447-1-1-1h-2c-0.553 0-1 0.447-1 1 0 0.552 0.447 1 1 1v1h-13v-1c0.553 0 1-0.448 1-1 0-0.553-0.447-1-1-1h-2c-0.553 0-1 0.447-1 1 0 0.552 0.447 1 1 1v1h-4c-1.104 0-2-0.896-2-2v-14c0-1.104 0.896-2 2-2h24c1.104 0 2 0.896 2 2v14c0 1.104-0.896 2-2 2zM10 9.812c-1.208 0-2.188 1.287-2.188 2.875s0.98 2.875 2.188 2.875 2.188-1.287 2.188-2.875-0.98-2.875-2.188-2.875zM13.49 16.688c-0.539-0.359-2.091-0.598-2.091-0.598s-1.006 1.075-1.433 1.075c-0.428 0-1.434-1.075-1.434-1.075s-1.552 0.238-2.090 0.598c-0.539 0.358-0.777 2.261-0.777 2.261h8.615c0.001-0.001-0.157-1.84-0.79-2.261zM26 11h-9v1h9v-1zM26 13h-9v1h9v-1zM26 15h-9v1h9v-1zM26 17h-9v1h9v-1z"></path>
                                                                    </svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">vCard</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.frame" class="item" data-type="frame" data-api="false" ng-click="onClickTab('frame', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon">
                                                                <i class="icon-vcard">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#38b6ff" d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">Grid Frame</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.photoFrame" class="item" data-type="photoFrame" data-api="false" ng-click="onClickTab('photoFrame', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon">
                                                                <i class="icon-vcard">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#05A081" d="M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM18 8H6v10h12"/></svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">Photo Frame</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings.elements.imageShape && (settings.task == 'create_template' || settings.task == 'edit_template' )" class="item" data-type="image-shape" data-api="false" ng-click="onClickTab('image-shape', 'element')">
                                                        <div class="main-item">
                                                            <div class="item-icon">
                                                                <i class="icon-vcard">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path fill="#888" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                                                                </i>
                                                            </div>
                                                            <div class="item-info">
                                                                <span class="item-name">Image Placeholder</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="pointer"></div>
                                            </div>
                                            <div class="result-loaded">
                                                <div class="content-items">
                                                    <div class="content-item type-draw" data-type="draw">
                                                        <div class="main-type">
                                                            <div class="free-draw-settings" ng-show="resource.drawMode.status">
                                                                <span class="heading-title">Free Drawing</span>
                                                                <div class="brush" >
                                                                    <h3 class="color-palette-label" >Choose </h3>
                                                                    <button class="nbd-button nbd-dropdown">
                                                                        Brush<i class="icon-nbd icon-nbd-arrow-drop-down"></i>
                                                                        <div class="nbd-sub-dropdown" data-pos="left">
                                                                            <ul class="tab-scroll">
                                                                                <li ng-click="resource.drawMode.brushType = 'Pencil';changeBush()" ng-class="resource.drawMode.brushType == 'Pencil' ? 'active' : ''"><span>Pencil</span></li>
                                                                                <li ng-click="resource.drawMode.brushType = 'Circle';changeBush()" ng-class="resource.drawMode.brushType == 'Circle' ? 'active' : ''"><span>Circle</span></li>
                                                                                <li ng-click="resource.drawMode.brushType = 'Spray';changeBush()" ng-class="resource.drawMode.brushType == 'Spray' ? 'active' : ''"><span>Spray</span></li>
                                                                            </ul>
                                                                        </div>
                                                                    </button>
                                                                </div>
                                                                <ul class="main-ranges" >
                                                                    <li class="range range-brightness">
                                                                        <label>Brush width </label>
                                                                        <div class="main-track">
                                                                            <input class="slide-input" type="range" step="1" min="1" max="100" ng-change="changeBush()" ng-model="resource.drawMode.brushWidth">
                                                                            <span class="range-track"></span>
                                                                        </div>
                                                                        <span class="value-display">{{resource.drawMode.brushWidth}}</span>
                                                                    </li>
                                                                </ul>
                                                                <div class="color">
                                                                    <h3 class="color-palette-label" >Brush color</h3>
                                                                    <ul class="main-color-palette nbd-perfect-scroll" >
                                                                        <li class="color-palette-add" ng-init="showBrushColorPicker = false" ng-click="showBrushColorPicker = !showBrushColorPicker;" ng-style="{'background-color': currentColor}"></li>
                                                                        <li ng-repeat="color in listAddedColor track by $index" ng-click="resource.drawMode.brushColor=color; changeBush()" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background-color': color}"></li>
                                                                    </ul>
                                                                    <div class="pinned-palette default-palette" >
                                                                        <h3 class="color-palette-label" >Default palette</h3>
                                                                        <ul class="main-color-palette" ng-repeat="palette in resource.defaultPalette" >
                                                                            <li ng-class="{'first-left': $first, 'last-right': $last}" ng-repeat="color in palette track by $index" ng-click="resource.drawMode.brushColor=color; changeBush()" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="nbd-text-color-picker" id="nbd-bg-color-picker" ng-class="showBrushColorPicker ? 'active' : ''" >
                                                                        <spectrum-colorpicker
                                                                            ng-model="currentColor"
                                                                            options="{
                                                                                    preferredFormat: 'hex',
                                                                                    color: '#fff',
                                                                                    flat: true,
                                                                                    showButtons: false,
                                                                                    showInput: true,
                                                                                    containerClassName: 'nbd-sp'
                                                                            }">
                                                                        </spectrum-colorpicker>
                                                                        <div style="text-align: right">
                                                                            <button class="nbd-button" ng-click="addColor();changeBush(currentColor);showBrushColorPicker = false;">Choose</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="nbd-color-palette-inner" >
                                                                    <div class="working-palette" ng-if="settings['nbdesigner_show_all_color'] == 'yes'" >
                                                                        <ul class="main-color-palette tab-scroll">
                                                                            <li class="color-palette-item color-palette-add" ng-click="stageBgColorPicker.status = !stageBgColorPicker.status;" ></li>
                                                                            <li ng-repeat="color in listAddedColor track by $index"
                                                                                ng-click="changeBackgroundCanvas(color)"
                                                                                class="color-palette-item"
                                                                                data-color="{{color}}"
                                                                                title="{{color}}"
                                                                                ng-style="{'background-color': color}">
                                                                            </li>
                                                                        </ul>
                                                                        <div class="nbd-text-color-picker" id="nbd-stage-bg-color-picker" ng-class="stageBgColorPicker.status ? 'active' : ''">
                                                                            <spectrum-colorpicker
                                                                                ng-model="stageBgColorPicker.currentColor"
                                                                                options="{
                                                                                preferredFormat: 'hex',
                                                                                color: '#fff',
                                                                                flat: true,
                                                                                showButtons: false,
                                                                                showInput: true,
                                                                                containerClassName: 'nbd-sp'
                                                                                }">
                                                                            </spectrum-colorpicker>
                                                                            <div>
                                                                                <button class="nbd-button"
                                                                                    ng-click="changeBackgroundCanvas(stageBgColorPicker.currentColor);">
                                                                                        Choose
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'yes'">
                                                                        <h3 class="color-palette-label default" >Default palette</h3>
                                                                        <ul class="main-color-palette tab-scroll" ng-repeat="palette in resource.defaultPalette">
                                                                            <li ng-class="{'first-left': $first, 'last-right': $last}"
                                                                                ng-repeat="color in palette track by $index"
                                                                                ng-click="changeBackgroundCanvas(color)"
                                                                                class="color-palette-item"
                                                                                data-color="{{color}}"
                                                                                title="{{color}}"
                                                                                ng-style="{'background': color}">
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'no'">
                                                                        <h3 class="color-palette-label">Color palette</h3>
                                                                        <ul class="main-color-palette settings" >
                                                                            <li ng-repeat="color in __colorPalette track by $index" ng-class="{'first-left': $first, 'last-right': $last}" ng-click="changeBackgroundCanvas(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                                                                        </ul>
                                                                    </div>
                                                                    <div><button class="nbd-button" ng-click="removeBackgroundCanvas()">Remove background</button></div>
                                                                </div>
                                                            </div>
                                                            <div class="free-draw-options">
                                                                <div class="draw-item" ng-class="resource.drawMode.status ? 'active' : ''" ng-click="enableDrawMode()" title="Free Draw">
                                                                    <i class="icon-nbd icon-nbd-drawing"></i>
                                                                </div>
                                                                <div class="draw-item" ng-click="addGeometricalObject( 'circle' )" title="Circle">
                                                                    <i class="icon-nbd icon-nbd-layer-circle"></i>
                                                                </div>
                                                                <div class="draw-item" ng-click="addGeometricalObject( 'triangle' )" title="Triangle">
                                                                    <i class="icon-nbd icon-nbd-layer-triangle"></i>
                                                                </div>
                                                                <div class="draw-item" ng-click="addGeometricalObject( 'rect' )" title="Rectangle">
                                                                    <i class="icon-nbd icon-nbd-layer-rect"></i>
                                                                </div>
                                                                <div class="draw-item" ng-click="addGeometricalObject( 'hexagon' )" title="Hexagon">
                                                                    <i class="icon-nbd icon-nbd-layer-polygon"></i>
                                                                </div>
                                                                <div class="draw-item" ng-click="addGeometricalObject( 'line' )" title="Line">
                                                                    <i class="icon-nbd icon-nbd-line"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-shapes" data-type="shapes" id="nbd-shape-wrap">
                                                        <div class="mansory-wrap">
                                                            <div nbd-drag="art.url" extenal="true" type="svg" class="mansory-item" ng-click="addSvgFromMedia(art)" ng-repeat="art in resource.shape.data" repeat-end="onEndRepeat('shape')"><img ng-src="{{art.url}}"><span class="photo-desc">{{art.name}}</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-icons" data-type="icons" id="nbd-icon-wrap">
                                                        <div class="cliparts-category" ng-class="resource.icon.cat.length > 0 ? '' : 'nbd-hiden'">
                                                            <div class="nbd-button nbd-dropdown nbd-cat-dropdown">
                                                                <span>{{resource.icon.filter.currentCat.name}}</span>
                                                                <i class="icon-nbd icon-nbd-chevron-right rotate90"></i>
                                                                <div class="nbd-sub-dropdown" data-pos="center">
                                                                    <ul class="nbd-perfect-scroll">
                                                                        <li ng-click="changeCat('icon', cat)" ng-repeat="cat in resource.icon.cat"><span>{{cat.name}}</span><span>{{cat.total}}</span></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="mansory-wrap">
                                                            <div nbd-drag="art.url" extenal="true" type="svg" class="mansory-item" ng-click="addSvgFromMedia(art, $index)" ng-repeat="art in resource.icon.data" repeat-end="onEndRepeat('icon')">
                                                                <div class="mansory-item__inner">
                                                                    <img ng-src="{{art.url}}" /><span class="photo-desc">{{art.name}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-flaticon" data-type="flaticon" id="nbd-flaticon-wrap">
                                                        <div class="mansory-wrap">
                                                            <div nbd-drag="art.url" extenal="true" type="svg" class="mansory-item" ng-click="addArt(art, true, true)" ng-repeat="art in resource.flaticon.data" repeat-end="onEndRepeat('flaticon')"><img ng-src="{{art.url}}"><span class="photo-desc">{{art.name}}</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-storyset" data-type="storyset" id="nbd-storyset-wrap">
                                                        <div class="mansory-wrap">
                                                            <div nbd-drag="art.url" extenal="true" type="svg" class="mansory-item" ng-click="addArt(art, true, true)" ng-repeat="art in resource.storyset.data" repeat-end="onEndRepeat('storyset')"><img ng-src="{{art.url}}"><span class="photo-desc">{{art.name}}</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-lines" data-type="lines" id="nbd-line-wrap">
                                                        <div class="mansory-wrap">
                                                            <div nbd-drag="art.url" extenal="true" type="svg" class="mansory-item" ng-click="addSvgFromMedia(art)" ng-repeat="art in resource.line.data" repeat-end="onEndRepeat('line')"><img ng-src="{{art.url}}"><span class="photo-desc">{{art.name}}</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-qrcode" data-type="qr-code">
                                                        <div class="main-type">
                                                            <div class="main-input">
                                                                <input ng-model="resource.qrText" type="text" class="nbd-input input-qrcode" name="qr-code" placeholder="https://yourcompany.com">
                                                            </div>
                                                            <button ng-class="resource.qrText != '' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="addQrCode()">Create QRCode</button>
                                                            <button ng-class="resource.qrText != '' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="addBarCode()">Create BarCode</button>
                                                            <div class="main-qrcode">
                                                                
                                                            </div>
                                                            <svg id="barcode" ></svg>
                                                        </div>
                                                    </div>
                                                    <div ng-if="settings['nbdesigner_enable_vcard'] == 'yes'" class="content-item type-vcard" data-type="vcard">
                                                        <p>Your information</p>
                                                        <div ng-repeat="field in settings.vcard_fields" class="md-input-wrap">
                                                            <input id="vf-{{field.key}}" ng-model="field.value" ng-class="field.value.length > 0 ? 'holder' : ''"/>
                                                            <label for="vf-{{field.key}}" >{{field.name}}<label/>
                                                        </div>
                                                        <p>
                                                            <span class="nbd-button" ng-click="generateVcard()">Generate</span>
                                                        </p>
                                                    </div>
                                                    <div class="content-item type-frame" data-type="frame">
                                                        <div class="frames-wrapper">
                                                            <div class="frame-wrap" ng-repeat="frame in resource.frames track by $index" ng-click="addFrame(frame)">
                                                                <photo-frame data-frame="frame"></photo-frame>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-photoFrame" data-type="photoFrame" id="nbd-photoFrame-wrap">
                                                        <div class="mansory-wrap">
                                                            <div class="mansory-item" ng-click="addPhotoFrame(frame)" ng-repeat="frame in [] | range: ( resource.photoFrame.filter.currentPage * resource.photoFrame.filter.perPage > resource.photoFrame.filter.total ? resource.photoFrame.filter.total : ( resource.photoFrame.filter.currentPage * resource.photoFrame.filter.perPage ) )" repeat-end="onEndRepeat('photoFrame')">
                                                                <img ng-src="{{'https://dpeuzbvf3y4lr.cloudfront.net/frames/preview/f' + ( frame + 1 ) + '.png'}}" alt="Photo Frame" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content-item type-image-shape" data-type="image-shape">
                                                        <div class="image-shape-wrapper">
                                                            <div>
                                                                <span class="shape_mask shape-type-{{n}}" ng-click="addMask(n)" ng-repeat="n in [] | range:25"></span>
                                                            </div>
                                                            <div class="custom_image_shape-wrapper">
                                                                <div>Custom Shape</div>
                                                                <textarea class="form-control hover-shadow nbdesigner_svg_code" rows="5" ng-change="getPathCommand()" ng-model="svgPath" placeholder="Enter svg code"/></textarea>
                                                                <button ng-class="pathCommand !='' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="addMask(-1)">Add Shape</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="nbdesigner-gallery" id="nbdesigner-gallery">
                                                </div>
                                                <div class="loading-photo" >
                                                    <svg class="circular" viewBox="25 25 50 50">
                                                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="info-support">
                                                <span>Facebook</span>
                                                <i class="icon-nbd icon-nbd-clear close-result-loaded" ng-click="onClickTab('', 'element')"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- End tab element -->

                                <!-- tab-layer -->
                                <div class="tab tab-last" id="tab-layer">
                                    <div class="tab-main tab-scroll">
                                        <div class="inner-tab-layer">
                                            <ul class="menu-layer" nbd-layer="sortLayer(srcIndex, dstIndex)">
                                                <li class="menu-item item-layer-text" data-index="{{layer.index}}" ng-click="activeLayer(layer.index)" 
                                                    ng-class="[{'lock-active': !layer.selectable, 'nbd-disable-event': !isTemplateMode && layer.forceLock, 'active' : stages[currentStage].states.isLayer && stages[currentStage].states.itemId == layer.itemId}, layer.type]" 
                                                    data-id="{{layer.itemId}}" ng-repeat="layer in stages[currentStage].layers | reverse">
                                                    <div class="item-layer-inner" ng-if="layer.type != 'image-layer'">
                                                        <i ng-if="layer.type != 'image'" class="icon-nbd item-left" ng-class="'icon-nbd-' + layer.icon_class"></i>
                                                        <img ng-if="layer.type == 'image'" ng-src="{{layer.src}}" />
                                                        <div ng-if="layer.type == 'text'" class="item-center text-layer"><input ng-class="layer.editable ? '' : 'nbd-disabled'" ng-change="setLayerAttribute('text', layer.text, layer.index, layer.index)" ng-model="layer.text" type="text"/></div>
                                                        <input ng-if="layer.type != 'text'" ng-model="layer.layerName" ng-change="changeLayerName( layer.index, layer.layerName )"/>
                                                        <span class="item-right">
                                                            <i class="icon-nbd icon-nbd-baseline-warning" ng-if="layer.lostChar"></i>
                                                            <i ng-click="setLayerAttribute('visible', !layer.visible, layer.index, layer.index); $event.stopPropagation();" ng-class="layer.visible ? 'icon-nbd-fomat-visibility' : 'icon-nbd-fomat-visibility-off'" class="icon-nbd icon-visibility" data-active="true" data-act="visibility" title="Show/Hide"></i>
                                                            <i ng-click="setLayerAttribute('selectable', !layer.selectable, layer.index, layer.index); $event.stopPropagation();" ng-class="layer.selectable ? 'icon-nbd-fomat-lock-open' : 'icon-nbd-fomat-lock-outline'" class="icon-nbd icon-lock" data-active="true" data-act="lock" title="Lock/Unlock"></i>
                                                            <i ng-click="deleteLayers(layer.index); $event.stopPropagation();" class="icon-nbd icon-nbd-fomat-highlight-off icon-close" data-act="close" title="Delete"></i>
                                                        </span>
                                                    </div>
                                                    <div ng-if="layer.type == 'image-layer'" class="item-layer-image-mask">
                                                        <div class="item-layer-inner">
                                                            <span class="item-center"><i class="icon-nbd item-left icon-nbd-images" ></i> {{settings.nbdlangs[layer.type]}}</span>
                                                            <span class="item-right">
                                                                <i class="icon-nbd icon-nbd-baseline-warning" ng-if="layer.lostChar"></i>
                                                                <i ng-click="setLayerAttribute('visible', !layer.visible, layer.index, layer.index); $event.stopPropagation();" ng-class="layer.visible ? 'icon-nbd-fomat-visibility' : 'icon-nbd-fomat-visibility-off'" class="icon-nbd icon-visibility" data-active="true" data-act="visibility" title="Show/Hide"></i>
                                                                <i ng-click="setLayerAttribute('selectable', !layer.selectable, layer.index, layer.index); $event.stopPropagation();" ng-class="layer.selectable ? 'icon-nbd-fomat-lock-open' : 'icon-nbd-fomat-lock-outline'" class="icon-nbd icon-lock" data-active="true" data-act="lock" title="Lock/Unlock"></i>
                                                                <i ng-click="deleteLayers(layer.index); $event.stopPropagation();" class="icon-nbd icon-nbd-fomat-highlight-off icon-close" data-act="close" title="Delete"></i>
                                                            </span>
                                                        </div>
                                                        <div class="item-layer-inner">
                                                            <ul>
                                                                <li>
                                                                    Mask
                                                                </li>
                                                                <li>
                                                                    <img ng-src="{{layer.src}}" />
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab-layer -->

                                <!-- tab-font -->
                                <div class="tab tab-last" id="tab-font" nbd-scroll="scrollLoadMore(container, type)" data-container="#tab-font" data-type="{{currentFont}}" data-offset="20">
                                    <div class="tab-main tab-scroll">
                                        <div class="sub-menu" data-pos="left">
                                            <div class="toolbar-font-search" ng-show="currentFont == 'font'">
                                                <input type="search" name="font-search" ng-model="resource.font.filter.search" placeholder="Search in {{resource.font.data.length}} fonts"/>
                                                <i ng-show="resource.font.filter.search.length > 0" ng-click="resource.font.filter.search = ''" class="icon-nbd icon-nbd-clear"></i>
                                            </div>
                                            <div class="toolbar-font-search"  ng-show="currentFont == 'myFont'">
                                                <input type="search" name="font-search" ng-model="resource.myFont.filter.search" placeholder="Search in {{resource.myFont.data.length}} fonts"/>
                                                <i ng-show="resource.myFont.filter.search.length > 0" ng-click="resource.myFont.filter.search = ''" class="icon-nbd icon-nbd-clear"></i>
                                            </div>
                                            <div id="toolbar-font-familly-dropdown">
                                                <div class="group-font" ng-show="stages[currentStage].states.usedFonts.length > 0">
                                                    <div class="toolbar-menu-header">
                                                        <div class="toolbar-header-line"></div>
                                                        <div class="toolbar-separator">Document Fonts</div>
                                                        <div class="toolbar-header-line"></div>
                                                    </div>
                                                    <ul class="sub-menu-items">
                                                        <li ng-click="setTextAttribute('fontFamily', font.alias)" class="sub-menu-item slideInDown animate500" ng-repeat="font in stages[currentStage].states.usedFonts">
                                                            <span class="font-name-wrap" style="font-family: '{{font.alias}}',-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;"><span class="font-name">{{(font.display_name && font.display_name != '') ? font.display_name : font.name}}</span></span>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="group-font">
                                                    <div class="toolbar-menu-header">
                                                        <div class="toolbar-header-line"></div>
                                                        <!-- <div class="toolbar-separator">All Fonts</div> -->
                                                        <div class="nbd-tab-nav pc-tab-nav pc-tab-fonts">
                                                            <ul class="nbd-tabs">
                                                                <li class="nbd-tab active" data-tab="google-font-tab" ng-click="changeCurrentFont('font')">
                                                                    <span class="title">Google fonts</span>
                                                                </li>
                                                                <li class="nbd-tab" data-tab="custom-font-tab" ng-click="changeCurrentFont('myFont')">
                                                                    <span class="title">Custom fonts</span>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="toolbar-header-line"></div>
                                                    </div>
                                                    <div class="nbd-tab-contents">
                                                        <div class="nbd-tab-content active" id="google-font-tab">
                                                            <ul class="sub-menu-items">
                                                                <li class="sub-menu-item slideInDown animate500" ng-class="font.alias == stages[currentStage].states.text.fontFamily ? 'chosen' : ''" ng-click="setTextAttribute('fontFamily', font.alias)" ng-repeat="font in resource.font.filteredFonts" repeat-end="onEndRepeat('font')" data-font="font" font-on-load load-font-fail-action="loadFontFailAction(font)" data-preview="settings.subsets[font.subset]['preview_text']" >
                                                                    <span class="font-name-wrap" style="font-family: '{{font.alias}}',-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;"><span class="font-name">{{(font.display_name && font.display_name != '') ? font.display_name : font.name}}</span></span>
                                                                    <i ng-if="font.alias == stages[currentStage].states.text.fontFamily" class="icon-nbd icon-nbd-fomat-done font-selected"></i>
                                                                </li>
                                                            </ul>
                                                            <div class="tab-load-more" ng-show="!resource.font.onload && ( resource.font.nextPage || resource.font.filter.totalPage == 0 )">
                                                                <a class="nbd-button" ng-click="scrollLoadMore('#tab-font', 'font')">Load more</a>
                                                            </div>
                                                        </div>
                                                        <div class="nbd-tab-content" id="custom-font-tab">
                                                            <ul class="sub-menu-items">
                                                                <li class="sub-menu-item slideInDown animate500" ng-class="font.alias == stages[currentStage].states.text.fontFamily ? 'chosen' : ''" ng-click="setTextAttribute('fontFamily', font.alias)" ng-repeat="font in resource.myFont.filteredFonts" repeat-end="onEndRepeat('myFont')" data-font="font" font-on-load load-font-fail-action="loadFontFailAction(font)" data-preview="settings.subsets[font.subset]['preview_text']" >
                                                                    <span class="font-name-wrap" style="font-family: '{{font.alias}}',-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;"><span class="font-name">{{(font.display_name && font.display_name != '') ? font.display_name : font.name}}</span></span>
                                                                    <i ng-if="font.alias == stages[currentStage].states.text.fontFamily" class="icon-nbd icon-nbd-fomat-done font-selected"></i>
                                                                </li>
                                                            </ul>
                                                            <div class="tab-load-more" ng-show="!resource.myFont.onload && ( resource.myFont.nextPage || resource.myFont.filter.totalPage == 0 )">
                                                                <a class="nbd-button" ng-click="scrollLoadMore('#tab-font', 'myFont')">Load more</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="loading-photo" style="width: 40px; height: 40px; display: none;" >
                                                    <svg class="circular" viewBox="25 25 50 50">
                                                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                                    </svg>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end tab-font -->

                            </div>
                        </div>
                        <div class="main">
                            <div class="nbd-toolbar animated" ng-class="stages[currentStage].states.isActiveLayer ? 'fadeInDown' : 'fadeOutUp'">
                                <div class="main-toolbar">
                                    <!-- Start toolbars toolbar-text -->
                                    <div class="toolbar-text" ng-show="stages[currentStage].states.isText">
                                        <ul class="nbd-main-menu menu-left">
                                            <li class="menu-item item-font-familly" ng-if="settings.nbdesigner_text_change_font == 1" ng-click="updateScrollBar('#toolbar-font-familly-dropdown');showTabFont('click')">
                                                <button class="toolbar-bottom">
                                                    <span class="toolbar-label toolbar-label-font" ng-style="{'font-family': stages[currentStage].states.text.font.alias}">{{(stages[currentStage].states.text.font.display_name && stages[currentStage].states.text.font.display_name != '') ? stages[currentStage].states.text.font.display_name : stages[currentStage].states.text.font.name}}</span>
                                                    <i class="icon-nbd icon-nbd-dropdown-arrows"></i>
                                                </button>
                                            </li>
                                            <li class="menu-item item-font-size" ng-if="settings.nbdesigner_text_font_size == 1" ng-click="updateScrollBar('#toolbar-font-size-dropdown')">
                                                <div class="toolbar-bottom">
                                                    <input class="toolbar-input" type="text" ng-keyup="$event.keyCode == 13 && setTextAttribute('fontSize', stages[currentStage].states.text.ptFontSize)" name="font-size" ng-model="stages[currentStage].states.text.ptFontSize"/>
                                                    <span class="font-unit">pt</span><i class="icon-nbd icon-nbd-dropdown-arrows"></i>
                                                    <div class="sub-menu" data-pos="left">
                                                        <div id="toolbar-font-size-dropdown">
                                                            <ul>
                                                                <li class="sub-menu-item" ng-click="setTextAttribute('fontSize', fontsize)" ng-class="stages[currentStage].states.text.ptFontSize == fontsize ? 'chosen' : ''" ng-repeat="fontsize in listFontSizeInPt">
                                                                    <span>{{fontsize}}</span>
                                                                    <i class="icon-nbd icon-nbd-fomat-done" ng-if="stages[currentStage].states.text.ptFontSize == fontsize"></i>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li> 
                                            <li class="menu-item item-align item-edit-text">
                                                <i class="icon-nbd icon-nbd-text-fields nbd-tooltip-hover" title="Edit Text"></i>
                                                <div class="sub-menu sub-menu-box-curved" data-pos="center" >
                                                    <div class="box-curved" >
                                                        <textarea ng-change="setTextAttribute('text', stages[currentStage].states.text.text)" ng-model="stages[currentStage].states.text.text" placeholder="Enter your text"></textarea>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                        <ul class="nbd-main-menu menu-center" ng-if="settings.nbdesigner_text_color == 1">
                                            <li class="menu-item item-color-fill nbd-show-color-palette" ng-click="currentColor = stages[currentStage].states.text.fill">
                                                <span ng-style="{'background': stages[currentStage].states.text.fill}" class="nbd-tooltip-hover color-fill nbd-color-picker-preview" title="Color" ></span>
                                            </li>
                                        </ul>
                                        <ul class="nbd-main-menu menu-right">
                                            <li class="menu-item item-align" ng-if="settings.nbdesigner_text_align_left == 1 || settings.nbdesigner_text_align_center == 1 || settings.nbdesigner_text_align_right == 1">
                                                <i class="icon-nbd icon-nbd-format-align-center nbd-tooltip-hover" title="Text align"></i>
                                                <div class="sub-menu" data-pos="center">
                                                    <ul>
                                                        <li ng-click="setTextAttribute('textAlign', 'left')" class="sub-menu-item"
                                                            ng-class="stages[currentStage].states.text.textAlign == 'left' ? 'selected' : ''"
                                                            ng-if="settings['nbdesigner_text_align_left'] == '1'"><i class="icon-nbd icon-nbd-format-align-left nbd-tooltip-hover" title="Left"></i></li>
                                                        <li ng-click="setTextAttribute('textAlign', 'center')" class="sub-menu-item" 
                                                            ng-class="stages[currentStage].states.text.textAlign == 'center' ? 'selected' : ''"
                                                            ng-if="settings['nbdesigner_text_align_center'] == '1'"><i class="icon-nbd icon-nbd-format-align-center nbd-tooltip-hover" title="Center"></i></li>
                                                        <li ng-click="setTextAttribute('textAlign', 'right')" class="sub-menu-item"
                                                            ng-class="stages[currentStage].states.text.textAlign == 'right' ? 'selected' : ''"
                                                            ng-if="settings['nbdesigner_text_align_right'] == '1'"><i class="icon-nbd icon-nbd-format-align-right nbd-tooltip-hover" title="Right"></i></li>
                                                        <li ng-click="setTextAttribute('textAlign', 'justify')" class="sub-menu-item"
                                                            ng-class="stages[currentStage].states.text.textAlign == 'justify' ? 'selected' : ''"
                                                            ng-if="settings['nbdesigner_text_align_center'] == '1'"><i class="icon-nbd icon-nbd-format-align-justify nbd-tooltip-hover" title="Justify"></i></li>
                                                    </ul>
                                                </div>
                                            </li>
                                            <li ng-click="setTextAttribute('is_uppercase', stages[currentStage].states.text.is_uppercase ? false : true)"
                                                ng-if="settings.nbdesigner_text_case == 1"
                                                ng-class="stages[currentStage].states.text.is_uppercase ? 'selected' : ''" class="menu-item item-transform"><i class="icon-nbd icon-nbd-uppercase nbd-tooltip-hover" title="Uppercase"></i></li>
                                            <li ng-click="setTextAttribute('fontWeight', stages[currentStage].states.text.fontWeight == 'bold' ? 'normal' : 'bold')" 
                                                ng-class="{'selected': stages[currentStage].states.text.fontWeight == 'bold'}" class="menu-item item-text-bold"             
                                                ng-if="settings['nbdesigner_text_bold'] == '1'"><i class="icon-nbd icon-nbd-format-bold nbd-tooltip-hover" title="Bold"></i></li>
                                            <li ng-click="setTextAttribute('fontStyle', stages[currentStage].states.text.fontStyle == 'italic' ? 'normal' : 'italic')" 
                                                ng-class="{'selected': stages[currentStage].states.text.fontStyle == 'italic'}" class="menu-item item-text-italic" 
                                                ng-if="settings['nbdesigner_text_italic'] == '1'"><i class="icon-nbd icon-nbd-format-italic nbd-tooltip-hover" 
                                                title="Italic"></i></li>
                                            <li class="menu-item menu-item-none"><i class="icon-nbd icon-nbd-format-underlined nbd-tooltip-hover" title="Underline"></i></li>
                                        </ul>
                                        <ul class="nbd-main-menu menu-right">
                                            <li class="menu-item item-spacing nbd-tooltip-hover" ng-if="settings.nbdesigner_text_spacing == 1 || settings.nbdesigner_text_line_height == 1" data-range="true" title="Line height and spacing">
                                                <i class="icon-nbd icon-nbd-line_spacing"></i>
                                                <div class="sub-menu" data-pos="center">
                                                    <div class="main-ranges" >
                                                        <div class="range range-spacing" ng-if="settings.nbdesigner_text_spacing == 1">
                                                            <label>Spacing</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" ng-change="setTextAttribute('charSpacing', stages[currentStage].states.text.charSpacing)" ng-model="stages[currentStage].states.text.charSpacing" type="range" step="1" min="0" max="1000">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.text.charSpacing}}</span>
                                                        </div>
                                                        <div class="range range-line-height" ng-if="settings.nbdesigner_text_line_height == 1">
                                                            <label>Line height</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" ng-change="setTextAttribute('lineHeight', stages[currentStage].states.text.lineHeight)" ng-model="stages[currentStage].states.text.lineHeight" type="range" step="0.01" min="0" max="3">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.text.lineHeight}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item item-spacing item-stroke nbd-tooltip-hover" ng-if="settings.nbdesigner_text_outline == 1" data-range="true" title="Stroke">
                                                <i class="icon-nbd">
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                        <title>outline</title>
                                                        <path fill="#888" d="M23.292 12.134c0.138-0.445 0.208-0.91 0.208-1.384 0-2.619-2.131-4.75-4.75-4.75-1.396 0-2.685 0.61-3.573 1.632-0.021-0.021-0.035-0.046-0.056-0.067-0.973-0.974-2.349-1.533-3.776-1.533-1.422 0-2.794 0.556-3.77 1.525-0.264-0.431-0.644-0.813-1.122-1.108-0.474-0.294-1.032-0.449-1.613-0.449-0.482 0-0.955 0.109-1.369 0.316l-1.406 0.747c-1.442 0.721-2.051 2.526-1.313 4.002 0.272 0.543 0.714 0.982 1.248 1.272v4.663c0 1.654 1.346 3 3 3 0.766 0 1.458-0.297 1.989-0.771 0.54 0.487 1.25 0.771 2.011 0.771h5c0.778 0 1.479-0.305 2.010-0.795 0.796 0.5 1.731 0.795 2.74 0.795 2.895 0 5.25-2.355 5.25-5.25 0-0.922-0.25-1.825-0.708-2.616zM6 17c0 0.552-0.448 1-1 1s-1-0.448-1-1v-6.382c-0.144 0.072-0.306 0.106-0.471 0.106-0.401 0-0.813-0.203-0.988-0.553-0.247-0.494-0.031-1.095 0.463-1.342l1.361-0.724c0.141-0.070 0.307-0.105 0.475-0.105 0.199 0 0.4 0.050 0.561 0.149 0.294 0.183 0.599 0.504 0.599 0.851v8zM14 18h-5c-0.404 0-0.769-0.244-0.924-0.617-0.155-0.374-0.069-0.804 0.217-1.090l4-4c0.254-0.254 0.394-0.591 0.394-0.95s-0.14-0.695-0.394-0.949-0.601-0.381-0.949-0.381-0.696 0.127-0.952 0.382c-0.252 0.252-0.392 0.589-0.392 0.948 0 0.552-0.448 1-1 1s-1-0.448-1-1c0-0.894 0.348-1.733 0.98-2.364s1.498-0.947 2.364-0.947 1.731 0.316 2.363 0.948c0.632 0.631 0.979 1.471 0.979 2.363 0 0.893-0.348 1.733-0.979 2.364l-2.293 2.293h2.586c0.552 0 1 0.448 1 1s-0.448 1-1 1zM18.75 18c-1.792 0-3.25-1.458-3.25-3.25 0-0.552 0.448-1 1-1s1 0.448 1 1c0 0.689 0.561 1.25 1.25 1.25s1.25-0.561 1.25-1.25-0.561-1.25-1.25-1.25c-0.552 0-1-0.448-1-1s0.448-1 1-1c0.414 0 0.75-0.336 0.75-0.75s-0.336-0.75-0.75-0.75c-0.281 0-0.536 0.155-0.665 0.404-0.178 0.343-0.527 0.54-0.889 0.54-0.155 0-0.312-0.036-0.459-0.112-0.491-0.254-0.682-0.857-0.428-1.348 0.475-0.915 1.41-1.484 2.441-1.484 1.516 0 2.75 1.233 2.75 2.75 0 0.611-0.207 1.17-0.545 1.627 0.639 0.594 1.045 1.434 1.045 2.373 0 1.792-1.458 3.25-3.25 3.25z"></path>
                                                    </svg>
                                                </i>
                                                <div class="sub-menu" data-pos="center">
                                                    <div class="main-ranges" >
                                                        <div class="range range-line-height range-stroke">
                                                            <label>Color</label>
                                                            <span cattr="text.stroke" color="{{stages[currentStage].states.text.stroke}}" class="nbd-color-picker-preview nbd-color-picker" ng-style="{'background': stages[currentStage].states.text.stroke}"></span>
                                                            <span class="stroke-title">{{stages[currentStage].states.text.stroke}}</span>
                                                        </div>
                                                        <div class="range range-spacing">
                                                            <label>Width</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" ng-change="setTextAttribute('strokeWidth', stages[currentStage].states.text.strokeWidth)" ng-model="stages[currentStage].states.text.strokeWidth" type="range" step="0.01" min="0" max="5">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.text.strokeWidth}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item nbd-color-picker" ng-if="settings.nbdesigner_text_background == 1" cattr="text.textBackgroundColor" 
                                                ng-dblclick="setTextAttribute('textBackgroundColor', null)" title="Double click to remove background">
                                                <i class="icon-nbd nbd-tooltip-hover" title="Background">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                                                        <path d="M0 0h24v24H0z" fill="none"/>
                                                        <path fill="#888" d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z"/>
                                                        <path d="M0 20h24v4H0z" fill="{{stages[currentStage].states.text.textBackgroundColor}}"/>
                                                    </svg>
                                                </i>
                                            </li>
                                            <li  ng-show="stages[currentStage].states.type == 'curvedText'"  ng-class="stages[currentStage].states.type == 'curvedText' && curvedText.active ? 'active' : ''" class="menu-item item-curved nbd-tooltop-hover" data-range="true" title="Curved Text">
                                                <i ng-click="curvedText.active = !curvedText.active; $event.stopPropagation();" class="icon-nbd icon-nbd-vector" ></i>
                                                <div class="sub-menu" data-pos="center" >
                                                    <i class="icon-nbd icon-nbd-clear close-submenu" ng-click="curvedText.active = !curvedText.active; $event.stopPropagation();"></i>
                                                    <div class="box-curved" >
                                                        <textarea ng-change="setTextAttribute('text', stages[currentStage].states.text.text)" ng-model="stages[currentStage].states.text.text" placeholder="Enter your text"></textarea>
                                                    </div>
                                                    <div class="main-ranges">
                                                        <div class="range range-radius">
                                                            <label for="" class="nbd-text-align-left">Radius</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" ng-change="setTextAttribute('radius', stages[currentStage].states.text.radius)" ng-model="stages[currentStage].states.text.radius" type="range" step="1" min="50" max="400">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.text.radius}}</span>
                                                        </div>
                                                        <div class="range range-spacing">
                                                            <label for="" class="nbd-text-align-left">Spacing</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" ng-change="setTextAttribute('spacing', stages[currentStage].states.text.spacing)" ng-model="stages[currentStage].states.text.spacing" type="range" step="1" min="0" max="40">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.text.spacing}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="box-curved-reverse">
                                                        <span class="nbd-font-size-12">Reverse</span>
                                                        <div class="nbd-checkbox-group">
                                                            <input type="checkbox" id="curved-reverse-input" ng-change="setTextAttribute('reverse', stages[currentStage].states.text.reverse)" ng-model="stages[currentStage].states.text.reverse">
                                                            <label for="curved-reverse-input"></label>
                                                        </div>
                                                        <span class="nbd-font-size-12 rtl-title" >RTL</span>
                                                        <div class="nbd-checkbox-group">
                                                            <input type="checkbox" id="curved-rtl" ng-change="setTextAttribute('rtl', stages[currentStage].states.text.rtl)" ng-model="stages[currentStage].states.text.rtl">
                                                            <label for="curved-rtl"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- end toolbars toolbar-text -->

                                    <!-- toolbars/toolbar-image -->
                                    <div class="toolbar-image" ng-show="stages[currentStage].states.isImage">
                                        <ul class="nbd-main-menu">
                                            <li class="menu-item menu-filter" ng-show="settings.enableImageFilter">
                                                <i class="icon-nbd icon-nbd-baseline-tune nbd-tooltip-hover" title="Filter"></i>
                                                <div class="sub-menu" data-pos="left">
                                                    <div class="image-filters" ng-if="settings.enableImageFilter && stages[currentStage].states.isImage">
                                                        <div class="image-filter ng-scope" ng-click="removeImageFilters()" title="Clear filters">
                                                            <img ng-src="{{settings.assets_url + 'images/filter/filter.png'}}" />
                                                        </div>
                                                        <div class="image-filter" ng-click="addImageFilter( filter )" ng-class="stages[currentStage].states.filters[filter] ? 'active' : ''" ng-repeat="filter in availableFilters" title="{{filter}}">
                                                            <img ng-src="{{settings.assets_url + 'images/filter/f_' + filter + '.png'}}" />
                                                            <i class="icon-nbd icon-nbd-fomat-done" ></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <!-- <li class="menu-item menu-crop" ng-click="initCrop()">
                                                <i class="icon-nbd icon-nbd-round-crop nbd-tooltip-hover" title="Crop"></i>
                                            </li> -->
                                            <li class="menu-item menu-crop" ng-show="!stages[currentStage].states.isMasked">
                                                <i class="nbd-tooltip-hover nbd-svg-icon" title="Create clipping mask">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                                                </i>
                                                <div class="sub-menu sub-menu-shape_mask" data-pos="left" >
                                                    <div class="shape_mask-wrapper">
                                                        <span class="shape_mask shape-type-{{n}}" ng-click="createClippingMask(n)" ng-repeat="n in [] | range:25"></span>
                                                    </div>
                                                    <div class="custom_shape_mask-wrapper">
                                                        <div>Custom Mask</div>
                                                        <textarea class="form-control hover-shadow nbdesigner_svg_code" rows="5" ng-change="getPathCommand()" ng-model="svgPath" placeholder="Enter svg code"/></textarea>
                                                        <button ng-class="pathCommand !='' ? '' : 'nbd-disabled'" class="nbd-button" ng-click="createClippingMask(-1)">Apply Mask</button>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item menu-crop" ng-click="removeClippingMask()" ng-show="stages[currentStage].states.isMasked && !stages[currentStage].states.lockMask">
                                                <i class="nbd-tooltip-hover nbd-svg-icon" title="Remove clipping mask">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3.25 2.75l17 17L19 21l-2-2H5c-1.1 0-2-.9-2-2V7c0-.55.23-1.05.59-1.41L2 4l1.25-1.25zM22 12l-4.37-6.16C17.27 5.33 16.67 5 16 5H8l11 11 3-4z"/></svg>
                                                </i>
                                            </li>
                                            <li class="menu-item menu-crop" ng-click="editMask()" ng-show="stages[currentStage].states.isMasked && !stages[currentStage].states.lockMask">
                                                <i class="nbd-tooltip-hover nbd-svg-icon" title="Edit mask">
                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24" xml:space="preserve">
                                                        <path d="M23,7V1h-6v2H7V1H1v6h2v10H1v6h6v-2h10v2h6v-6h-2V7H23z M3,3h2v2H3V3z M5,21H3v-2h2V21z M17,19H7v-2H5V7h2V5h10v2h2v10h-2 V19z M21,21h-2v-2h2V21z M19,5V3h2v2H19z M13.7,14h-3.5l-0.7,2H7.9l3.4-9h1.4l3.4,9h-1.6C14.5,16,13.7,14,13.7,14z M10.7,12.7h2.6 L12,8.9C12,8.9,10.7,12.7,10.7,12.7z"/>
                                                        <path d="M12,5.4c-3.7,0-6.6,3-6.6,6.6s3,6.6,6.6,6.6s6.6-3,6.6-6.6S15.7,5.4,12,5.4z"/>
                                                    </svg>
                                                </i>
                                            </li>
                                            <li class="menu-item menu-crop" ng-click="replaceMaskedImage()" ng-if="settings['nbdesigner_enable_upload_image'] == 'yes'" ng-show="stages[currentStage].states.isMasked">
                                                <i class="nbd-tooltip-hover nbd-svg-icon" title="Replace image">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>
                                                </i>
                                            </li>
                                            <li class="menu-item menu-crop" ng-click="detachImage()" ng-show="stages[currentStage].states.isMasked && !stages[currentStage].states.isEmptyMask && !stages[currentStage].states.lockMask">
                                                <i class="nbd-tooltip-hover nbd-svg-icon" title="Detach Image">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M15.96 10.29l-2.75 3.54-1.96-2.36L8.5 15h11l-3.54-4.71zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z"/></svg>
                                                </i>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- end toolbars toolbar-image -->

                                    <!-- toolbars/toolbar-group -->
                                    <div  ng-show="stages[currentStage].states.isGroup" class="toolbar-group">
                                        <ul class="nbd-main-menu">
                                            <li ng-click="groupLayers()" class="menu-item menu-group" ng-show="stages[currentStage].states.isGroup">
                                                <i class=" tooltipstered nbd-tooltip-hover" title="Group layers"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20">
                                                    <title>Group layers</title>
                                                    <path d="M22.857 4.286h-1.429v11.429h1.429v4.286h-4.286v-1.429h-14.286v1.429h-4.286v-4.286h1.429v-11.429h-1.429v-4.286h4.286v1.429h14.286v-1.429h4.286v4.286zM20 1.429v1.429h1.429v-1.429h-1.429zM1.429 1.429v1.429h1.429v-1.429h-1.429zM2.857 18.571v-1.429h-1.429v1.429h1.429zM18.571 17.143v-1.429h1.429v-11.429h-1.429v-1.429h-14.286v1.429h-1.429v11.429h1.429v1.429h14.286zM21.429 18.571v-1.429h-1.429v1.429h1.429zM14.286 7.143h4.286v8.571h-10v-2.857h-4.286v-8.571h10v2.857zM5.714 11.429h7.143v-5.714h-7.143v5.714zM17.143 14.286v-5.714h-2.857v4.286h-4.286v1.429h7.143z"></path>
                                                </svg></i>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- end toolbars toolbar-group -->

                                    <!-- toolbars/toolbar-path -->
                                    <div class="toolbar-path">
                                        <ul class="nbd-main-menu menu-center tool-path"  ng-show="( stages[currentStage].states.isPath || stages[currentStage].states.isNativeGroup ) && !stages[currentStage].states.isMask">
                                            <li ng-click="unGroupLayers()" class="menu-item menu-group" ng-show="stages[currentStage].states.isNativeGroup">
                                                <i class="icon-nbd icon-nbd-ungroup nbd-tooltip-hover tooltipstered" title="Ungroup"></i>
                                            </li>
                                            <li class="menu-item item-color-fill nbd-show-color-palette" ng-click="stages[currentStage].states.svg.currentPath = $index" ng-repeat="path in stages[currentStage].states.svg.groupPath" end-repeat-color-picker>
                                                <span ng-style="{'background': path.color}" class="nbd-tooltip-hover color-fill nbd-color-picker-preview" title="Color" ></span>
                                            </li>
                                            <li class="menu-item menu-item-qrcode" ng-show="stages[currentStage].states.isQrcode">
                                                <i class="icon-nbd icon-nbd-qrcode" ></i> 
                                                <input ng-model="stages[currentStage].states.qrContent" ng-change="updateQrCode()"/>
                                            </li>
                                            <li class="menu-item menu-item-barcode" ng-show="stages[currentStage].states.isBarcode">
                                                <i>
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                        <path fill="#404762" d="M0 3h3v15h-3zM4.5 3h1.5v15h-1.5zM7.5 3h1.5v15h-1.5zM12 3h1.5v15h-1.5zM18 3h1.5v15h-1.5zM22.5 3h1.5v15h-1.5zM15 3h0.75v15h-0.75zM10.5 3h0.75v15h-0.75zM20.25 3h0.75v15h-0.75zM0 19.5h1.5v1.5h-1.5zM4.5 19.5h1.5v1.5h-1.5zM7.5 19.5h1.5v1.5h-1.5zM15 19.5h1.5v1.5h-1.5zM22.5 19.5h1.5v1.5h-1.5zM18 19.5h3v1.5h-3zM10.5 19.5h3v1.5h-3z"></path>
                                                    </svg>
                                                </i>
                                                <input ng-model="stages[currentStage].states.barCodeContent" ng-change="updateBarCode()"/>
                                            </li>
                                        </ul>
                                        <ul class="nbd-main-menu geo-object-options menu-center tool-path" ng-show="stages[currentStage].states.isShape && !stages[currentStage].states.isMask">
                                            <li class="menu-item menu-item-shape-fill">
                                                <span>Fill</span> <span cattr="geoObject.fill" color="{{stages[currentStage].states.geoObject.fill}}" class="nbd-color-picker-preview nbd-color-picker" ng-style="{'background': stages[currentStage].states.geoObject.fill}"></span>
                                            </li>
                                            <li class="menu-item menu-item-shape-fill">
                                                <span>Stroke</span> <span cattr="geoObject.stroke" color="{{stages[currentStage].states.geoObject.stroke}}" class="nbd-color-picker-preview nbd-color-picker" ng-style="{'background': stages[currentStage].states.geoObject.stroke}"></span> <span title="None" class="non-stroke" ng-click="setGeometricalObjectAttr( 'stroke', false )"></span>
                                            </li>
                                            <li class="menu-item menu-item-shape-fill">
                                                <span>Stroke Width</span> <input class="geo-object-stroke" ng-model="stages[currentStage].states.geoObject.strokeWidth" ng-change="setGeometricalObjectAttr('strokeWidth', stages[currentStage].states.geoObject.strokeWidth)"/>
                                            </li>
                                            <li class="menu-item menu-item-shape-fill">
                                                <span>Stroke Dash</span> <input class="geo-object-stroke" ng-model="stages[currentStage].states.geoObject.strokeDashArray[0]" ng-change="setGeometricalObjectAttr('strokeDashArray', [stages[currentStage].states.geoObject.strokeDashArray[0], stages[currentStage].states.geoObject.strokeDashArray[1]])"/> <input class="geo-object-stroke" ng-model="stages[currentStage].states.geoObject.strokeDashArray[1]" ng-change="setGeometricalObjectAttr('strokeDashArray', [stages[currentStage].states.geoObject.strokeDashArray[0], stages[currentStage].states.geoObject.strokeDashArray[1]])"/>
                                            </li>
                                            <li class="menu-item menu-item-shape-fill">
                                                <span>Stroke Uniform</span> <input type="checkbox" ng-model="stages[currentStage].states.geoObject.strokeUniform" ng-change="setGeometricalObjectAttr( 'strokeUniform', stages[currentStage].states.geoObject.strokeUniform )"/>
                                            </li>
                                        </ul>
                                        <ul class="nbd-main-menu menu-center tool-path" ng-show="stages[currentStage].states.isMask">
                                            <li class="menu-item" ng-click="exitMaskMode()">
                                                <i class="icon-nbd icon-nbd-fomat-done nbd-tooltip-hover" title="Apply mask"></i>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- end toolbars toolbar-path -->

                                    <!-- toolbars/toolbar-common -->
                                    <div class="toolbar-seperate"></div>
                                    <div class="toolbar-common">
                                        <ul class="nbd-main-menu" ng-hide="stages[currentStage].states.isMask">
                                            <li ng-if="settings.is_mobile" class="menu-item item-opacity ipad-mini-hidden" ng-click="copyLayers()">
                                                <i class="icon-nbd icon-nbd-content-copy nbd-tooltip-hover" title="Duplicate"></i>
                                            </li>
                                            <li ng-if="settings.is_mobile" class="menu-item item-opacity ipad-mini-hidden" ng-click="deleteLayers()">
                                                <i class="icon-nbd icon-nbd-delete nbd-tooltip-hover" title="Delete"></i>
                                            </li>
                                            <li class="menu-item item-opacity item-angle ipad-mini-hidden" data-range="true" ng-show="stages[currentStage].states.enableRotate">
                                                <i class="icon-nbd icon-nbd-refresh nbd-tooltip-hover" title="Angle"></i>
                                                <div class="sub-menu" data-pos="center">
                                                    <div class="main-ranges" >
                                                        <div class="range range-opacity">
                                                            <label>Angle</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" type="range" step="0.1" min="0" max="360" ng-change="setLayerAttribute('angle', stages[currentStage].states.angle)" ng-model="stages[currentStage].states.angle">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.angle}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="nbd-rotate-step-wrap">
                                                        <div class="nbd-rotate-step-row-1">
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 0)">0&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 30)">30&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 45)">45&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 60)">60&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 90)">90&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 120)">120&#xb0;</div>
                                                        </div>
                                                        <div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 135)">135&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 150)">150&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 180)">180&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 210)">210&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 240)">240&#xb0;</div>
                                                            <div class="nbd-rotate-step" ng-click="setLayerAttribute('angle', 270)">270&#xb0;</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item item-opacity item--opacity" data-range="true" ng-show="stages[currentStage].states.enableOpacity">
                                                <i class="icon-nbd icon-nbd-opacity nbd-tooltip-hover" title="Opacity"></i>
                                                <div class="sub-menu" data-pos="center">
                                                    <div class="main-ranges">
                                                        <div class="range range-opacity">
                                                            <label>Opacity</label>
                                                            <div class="main-track">
                                                                <input class="slide-input" type="range" step="1" min="0" max="100" ng-change="setTextAttribute('opacity', stages[currentStage].states.opacity / 100)" ng-model="stages[currentStage].states.opacity">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.opacity}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item item-shadow" data-range="true" ng-show="stages[currentStage].states.enableShadow">
                                                <i class="icon-nbd nbd-tooltip-hover" title="Shadow">
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16">
                                                        <path fill="#888" d="M14 2v-2h-14v14h2v2h14v-14h-2zM13 13h-12v-12h12v12z"></path>
                                                    </svg>
                                                </i>
                                                <div class="sub-menu" data-pos="center">
                                                    <div class="main-ranges">
                                                        <div class="range">
                                                            <label>Color</label>
                                                            <span style="vertical-align: middle;" cattr="shadow.color" color="{{stages[currentStage].states.shadow.color}}" class="nbd-color-picker-preview nbd-color-picker" ng-style="{'background': stages[currentStage].states.shadow.color}"></span>
                                                            <span class="shadow-color-code">{{stages[currentStage].states.shadow.color}}</span>
                                                        </div>
                                                        <div class="range shadow-offset">
                                                            <label>OffsetX</label> <input type="number" step="0.1" min="0" ng-model="stages[currentStage].states.shadow.offsetX" /> 
                                                            <label>OffsetY</label> <input type="number" step="0.1" min="0" ng-model="stages[currentStage].states.shadow.offsetY" /> 
                                                            <label>Blur</label> <input type="number" step="0.1" min="0" ng-model="stages[currentStage].states.shadow.blur" />
                                                        </div>
                                                        <div class="range range-shadow-opacity">
                                                            <label>Opacity</label>
                                                            <div class="main-track" style="margin-top: -15px;">
                                                                <input class="slide-input" type="range" step="0.01" min="0" max="1"  ng-model="stages[currentStage].states.shadow.opacity">
                                                                <span class="range-track"></span>
                                                            </div>
                                                            <span class="value-display">{{stages[currentStage].states.shadow.opacity}}</span>
                                                        </div>
                                                        <div class="range shadow-actions">
                                                            <button style="margin-left: 0;" class="nbd-button" ng-click="setShadow()">Apply</button>
                                                            <button class="nbd-button" ng-click="removeShadow()">Remove</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="menu-item item-stack ipad-mini-hidden" ng-class="stages[currentStage].states.isLayer ? '' : 'nbd-disabled'">
                                                <i class="icon-nbd icon-nbd-layer-stack nbd-tooltip-hover" title="Layer stack"></i>
                                                <div class="sub-menu" data-pos="right">
                                                    <ul>
                                                        <li class="sub-menu-item" ng-click="setStackPosition('bring-front')">
                                                            <i class="icon-nbd icon-nbd-bring-to-front"></i>
                                                            <span>Bring to Front</span>
                                                            <span class="keyboard">{{ 'M-S-]' | keyboardShortcut }}</span>
                                                        </li>
                                                        <li class="sub-menu-item" ng-click="setStackPosition('bring-forward')">
                                                            <i class="icon-nbd icon-nbd-bring-forward"></i>
                                                            <span>Bring Forward</span>
                                                            <span class="keyboard">{{ 'M-]' | keyboardShortcut }}</span>
                                                        </li>
                                                        <li class="sub-menu-item" ng-click="setStackPosition('send-backward')">
                                                            <i class="icon-nbd icon-nbd-sent-to-backward"></i>
                                                            <span>end to Backward</span>
                                                            <span class="keyboard">{{ 'M-[' | keyboardShortcut }}</span>
                                                        </li>
                                                        <li class="sub-menu-item" ng-click="setStackPosition('send-back')">
                                                            <i class="icon-nbd icon-nbd-send-to-back"></i>
                                                            <span>Send to Back'</span>
                                                            <span class="keyboard">{{ 'M-S-[' | keyboardShortcut }}</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </li>
                                            <li class="menu-item item-position">
                                                <i class="icon-nbd icon-nbd-baseline-tune nbd-tooltip-hover" title="Layer position"></i>
                                                <div class="sub-menu" data-pos="right">
                                                    <ul>
                                                        <i class="icon-nbd-clear nbd-close-sub-menu"></i>
                                                        <li class="title">
                                                            <span>Layer position</span>
                                                            <i class="colse"></i>
                                                        </li>
                                                        <li ng-click="translateLayer('vertical')"><i class="icon-nbd icon-nbd-fomat-vertical-align-center nbd-tooltip-hover" title="Center horizontal"></i></li>
                                                        <li ng-click="translateLayer('top-left')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate-90" title="Top left"></i></li>
                                                        <li ng-click="translateLayer('top-center')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate-45" title="Top center"></i></li>
                                                        <li ng-click="translateLayer('top-right')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover" title="Top right"></i></li>
                                                        <li ng-click="translateLayer('horizontal')"><i class="icon-nbd icon-nbd-fomat-vertical-align-center nbd-tooltip-hover rotate90" title="Center vertical"></i></li>
                                                        <li ng-click="translateLayer('middle-left')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate-135" title="Middle left"></i></li>
                                                        <li ng-click="translateLayer('center')"><i class="icon-nbd icon-nbd-bottom-center nbd-tooltip-hover middle-center" title="Middle center"></i></li>
                                                        <li ng-click="translateLayer('middle-right')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate45" title="Middle right"></i></li>
                                                        <li class="intro"><i class="icon-nbd icon-nbd-info-circle nbd-tooltip-hover" title="Intro"></i></li>
                                                        <li ng-click="translateLayer('bottom-left')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate-180" title="Bottom left"></i></li>
                                                        <li ng-click="translateLayer('bottom-center')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate135" title="Bottom center"></i></li>
                                                        <li ng-click="translateLayer('bottom-right')"><i class="icon-nbd icon-nbd-fomat-top-left nbd-tooltip-hover rotate90" title="Bottom right"></i></li>
                                                    </ul>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- end toolbars toolbar-common -->

                                    <!-- Start toolbars/color-palette -->
                                        <div class="nbd-color-palette" id="nbd-color-palette">
                                            <div class="nbd-color-palette-inner">
                                                <div class="working-palette" ng-hide="settings.hideColorPalette">
                                                    <h3 class="color-palette-label">Document colors</h3>
                                                    <ul class="main-color-palette nbd-perfect-scroll">
                                                        <li class="color-palette-add" ng-click="showTextColorPalette()" ng-if="settings['nbdesigner_show_all_color'] == 'yes'"></li>
                                                        <li class="color-eyedropper" ng-click="initEyeDropper2($event)" title="Eyedropper" ng-if="settings['nbdesigner_enable_eyedropper'] == 'yes' && !settings.is_mobile">
                                                            <span class="eyedropper-loading"></span>
                                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 508.8 508.8" xml:space="preserve"><g><path d="M508.324,61.2c0-16.4-6.4-31.6-18-43.2c-11.6-11.6-26.8-18-43.2-18c-16.4,0-31.6,6.4-43.2,18l-96.8,97.6 c-4.8-2.8-10-4-15.6-4c-8.4,0-16.8,3.2-22.8,9.2l-4,4c-12,12-12.4,30.8-1.6,43.6l-242,242c-13.2,13.2-16,33.6-6.8,49.6l-10.4,14 c-5.2,6.8-4.4,17.6,1.6,24l5.6,5.6c3.2,3.2,8,5.2,13.2,5.2c4,0,8-1.2,10.8-3.6l14-10.8c6,3.2,12.8,5.2,20,5.2 c11.2,0,21.6-4.4,29.2-12l241.6-241.6c6,5.2,13.2,8,21.2,8c8.4,0,16.8-3.2,22.8-9.2l4-4c10.4-10.4,12.4-26,5.2-38.4l97.2-98 C501.924,92.8,508.324,77.6,508.324,61.2z M87.124,476c-4.8,4.8-11.2,7.6-18,7.6c-4.4,0-8.8-1.2-12.4-3.2c-2.4-1.2-5.2-2-7.6-2 c-3.6,0-6.8,1.2-9.6,3.2l-14,10.8c0,0-0.8,0.4-1.2,0.4c-0.8,0-1.6-0.4-1.6-0.4l-6-6c-0.8-0.8-0.8-2.4-0.4-3.2l10.4-14 c4-5.2,4.4-12,1.2-17.6c-5.6-10-4-22.4,4-30.4l242.4-241.6l54.4,54.8L87.124,476z"/></g></svg>
                                                        </li>
                                                        <li ng-repeat="color in listAddedColor track by $index" ng-click="changeFill(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background-color': color}"></li>
                                                    </ul>
                                                </div>
                                                <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'yes'">
                                                    <h3 class="color-palette-label">Default palette</h3>
                                                    <ul class="main-color-palette" ng-repeat="palette in resource.defaultPalette" >
                                                        <li ng-class="{'first-left': $first, 'last-right': $last, 'first-right': $index == 4,'last-left': $index == (palette.length - 5)}" ng-repeat="color in palette track by $index" ng-click="changeFill(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                                                    </ul>   
                                                </div>
                                                <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'no'">
                                                    <h3 class="color-palette-label">Color palette</h3>
                                                    <ul class="main-color-palette" >
                                                        <li ng-repeat="color in __colorPalette track by $index" ng-class="{'first-left': $first, 'last-right': $last, 'first-right': $index == 4,'last-left': $index == (palette.length - 5)}" ng-click="changeFill(color);addColor(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                                                    </ul>
                                                </div>
                                                <div class="nbd-text-color-picker" id="nbd-text-color-picker" ng-class="showTextColorPicker ? 'active' : ''">
                                                    <spectrum-colorpicker
                                                        ng-model="currentColor"
                                                        options="{
                                                            preferredFormat: 'hex',
                                                            flat: true,
                                                            showButtons: false,
                                                            showInput: true,
                                                            containerClassName: 'nbd-sp'
                                                    }">
                                                    </spectrum-colorpicker>
                                                    <div>
                                                        <button class="nbd-button" ng-click="addColor();changeFill(currentColor);">Choose</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end toolbars color-palette -->
                                </div>
                            </div>
                            <!-- end mordern toolbar -->

                            <!-- modern/stages -->
                            <div class="nbd-stages" id="nbd-stages" nbd-drop-zone="uploadFile(files)">
                                <div class="stages-inner">
                                    <div class="stage" ng-repeat="(stageIndex, stage) in stages" id='stage-container-{{$index}}' ng-mousedown="onClickStage($event)" ng-class="{'_nbd_hidden':$index > 0}" >
                                        <div ng-click="addRulerGuideLine( $event, 'hors' );$event.stopPropagation();" ng-style="{'padding-left': calcRulerPaddingLeft(stage.config.cwidth * stage.states.scaleRange[stage.states.currentScaleIndex].ratio)}" ng-class="settings.showRuler ? '' : 'nbd-hide nbd-disable-event'" class="nbd-hoz-ruler temporary-hidden">
                                            <svg class="nbd-prevent-select" ng-style="{'width': calcStyle(stage.config.cwidth * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + 30)}" id="hoz-ruler-{{$index}}" xmlns="http://www.w3.org/2000/svg"></svg>
                                        </div>
                                        <div ng-click="addRulerGuideLine( $event, 'vers' ); $event.stopPropagation()" ng-style="{'padding-top': calcRulerPaddingTop(stage.config)}" ng-class="settings.showRuler ? '' : 'nbd-hide nbd-disable-event'" class="nbd-ver-ruler temporary-hidden">
                                            <svg class="nbd-prevent-select" ng-style="{'height': calcStyle(stage.config.cheight * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + 30)}" id="ver-ruler-{{$index}}" xmlns="http://www.w3.org/2000/svg"></svg>
                                        </div>
                                        <div ng-if="settings.showDimensions && !settings.is_mobile" class="nbd-dimension x-dimension" ng-style="{'left': calcRulerPaddingLeft(stage.config.cwidth * stage.states.scaleRange[stage.states.currentScaleIndex].ratio), 'width': calcStyle(stage.config.cwidth * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + 1)}"><span>{{settings.product_data.product[$index].product_width + ' ' + settings.nbdesigner_dimensions_unit}}</span></div>
                                        <div ng-if="settings.showDimensions && !settings.is_mobile" class="nbd-dimension y-dimension" ng-style="{'top': calcRulerPaddingTop(stage.config), 'height': calcStyle(stage.config.cheight * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + 1)}"><span class="dimension-number-wrap"><span class="dimension-number">{{settings.product_data.product[$index].product_height + ' ' + settings.nbdesigner_dimensions_unit}}</span></span></div>
                                        <div class="stage-main-wrap">
                                            <div class="stage-main" ng-class="stage.config.bgType == 'image' ? 'nbd-without-shadow' : ''" ng-style="{
                                                    'width' : calcStyle(stage.config.cwidth * stage.states.scaleRange[stage.states.currentScaleIndex].ratio),
                                                    'height' : calcStyle(stage.config.cheight * stage.states.scaleRange[stage.states.currentScaleIndex].ratio)
                                                }">
                                                <div class="stage-background" ng-style="{'background-color': stage.config.bgType == 'image' ? '#fff' : (( stage.config.bgType == 'color' && ( ( stage.config.show_overlay == '1' && stage.config.img_overlay != '' ) || !areaDesignShapes[$index] ) )  ? stage.config.bgColor : 'transparent')}">
                                                    <img ng-if="stage.config.bgType == 'image'" ng-src='{{stage.config.bgImage}}'/>
                                                </div>
                                                <div class="design-wrap" ng-class="settings.nbdesigner_show_design_border == 'yes' ? 'has-border' : ''" ng-style="{
                                                    'width' : calcStyle(stage.config.width * stage.states.scaleRange[stage.states.currentScaleIndex].ratio),
                                                    'height' : calcStyle(stage.config.height * stage.states.scaleRange[stage.states.currentScaleIndex].ratio),
                                                    'top' : calcStyle(stage.config.top * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + offsetDesignWrap),
                                                    'left' : calcStyle(stage.config.left * stage.states.scaleRange[stage.states.currentScaleIndex].ratio + offsetDesignWrap),
                                                    'background-color': ( stage.config.bgType == 'color' && !!areaDesignShapes[$index] ) ? stage.config.bgColor : 'transparent'
                                                }">
                                                    <div class="sticker-contour-pattern-wrap" ng-class="{'active': stickerCutline.active}" ></div>
                                                    <div class="design-zone" ng-style="{
                                                        '-webkit-clip-path': !!areaDesignShapes[$index] ? 'url(#area-design-shape-' + $index + ')' : 'none',
                                                        'clip-path': !!areaDesignShapes[$index] ? 'url(#area-design-shape-' + $index + ')' : 'none'
                                                    }">
                                                        <canvas nbd-canvas stage="stage" ctx="ctxMenuStyle" index="{{$index}}" id="nbd-stage-{{$index}}" last="{{$last ? 1 : 0}}"></canvas>
                                                    </div>
                                                    <div class="stage-grid">
                                                        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" ng-show="settings.showGrid">
                                                            <defs>
                                                                <pattern id="grid10-{{$index}}" width="10" height="10" patternUnits="userSpaceOnUse">
                                                                    <path d="M 10 0 L 0 0 0 10" fill="none" stroke="gray" stroke-width="0.5"/>
                                                                </pattern>
                                                                <pattern id="grid100-{{$index}}" width="100" height="100" patternUnits="userSpaceOnUse">
                                                                    <rect width="100" height="100" fill="url(#grid10-{{$index}})"/>
                                                                    <path d="M 100 0 L 0 0 0 100" fill="none" stroke="gray" stroke-width="1"/>
                                                                </pattern>
                                                            </defs>
                                                            <rect width="100%" height="100%" fill="url(#grid100-{{$index}})" />
                                                        </svg>
                                                    </div>
                                                    <div class="bounding-layers">
                                                        <div class="bounding-layers-inner">
                                                            <div class="bounding-rect" ng-style="stages[currentStage].states.boundingObject">
                                                                <span ng-if="settings.nbdesigner_show_layer_size == 'yes'" class="bounding-rect-real-size" ng-style="{'transform': stages[currentStage].states.boundingRealSize.transform}">{{stages[currentStage].states.boundingRealSize.size}}</span>
                                                            </div>
                                                            <div class="bounding-corner" ng-class="corner.type != '' ? 'corner-action' : 'bounding-holder'" data-type="corner.type" data-stage="{{stageIndex}}" ng-repeat="corner in stage.states.corners" ng-style="corner.style" ></div>
                                                            <div class="bounding-rect bounding-rect-upload-zone" ng-style="stages[currentStage].states.uploadZone" >
                                                                <i ng-style="{transform: 'rotate(-'+stages[currentStage].states.rotate.angle+'deg)'}" class="icon-nbd icon-nbd-replace-image"></i>
                                                                <span class="upload-zone-title" ng-style="{transform: 'rotate(-'+stages[currentStage].states.rotate.angle+'deg)'}">Drop to replace</span>
                                                            </div>
                                                            <div class="layer-coordinates" ng-style="stages[currentStage].states.coordinates.style">{{stages[currentStage].states.coordinates.left}} {{stages[currentStage].states.coordinates.top}}</div>
                                                            <div class="layer-angle" ng-style="stages[currentStage].states.rotate.style"><span ng-style="{transform: 'rotate(-'+stages[currentStage].states.rotate.angle+'deg)'}">{{stages[currentStage].states.rotate.angle}}</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="stage-snapLines">
                                                        <div class="stage-snapLines-inner">
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.ht"></div>
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.hc"></div>
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.hb"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.vl"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.vc"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.vr"></div>
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.hcc"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.vcc"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.vel"></div>
                                                            <div class="snapline v-snapline" ng-style="stages[currentStage].states.snaplines.ver"></div>
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.het"></div>
                                                            <div class="snapline h-snapline" ng-style="stages[currentStage].states.snaplines.heb"></div>
                                                        </div>
                                                    </div>
                                                    <div class="stage-overlay">
                                                        <div class="stage-fold-wrap" ng-style="{'width' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.width - 2 * stage.config.bleed_lr)),
                                                            'height' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.height - 2 * stage.config.bleed_tb)),
                                                            'left' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_lr)),
                                                            'border-radius' : calcStyle(stage.config.bleed_radius ? stage.states.scaleRange[stage.states.currentScaleIndex].ratio * stage.config.bleed_radius : 0),
                                                            'top' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_tb))}">
                                                            <div class="stage-fold-marks" ng-if="resource.config.fold" ng-class="resource.config.foldClass">
                                                                <div class="stage-fold-mark" ng-repeat="n in [] | range: resource.config.numberPanel"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="stage-area-design-shape" ng-style="{
                                                        'width' : calcStyle(stage.config.width * stage.states.scaleRange[stage.states.currentScaleIndex].ratio),
                                                        'height' : calcStyle(stage.config.height * stage.states.scaleRange[stage.states.currentScaleIndex].ratio)
                                                    }"></div>
                                                    <div class="stage-guideline">
                                                        <div class="stage-guideline-inner">
                                                            <div ng-class="{'nbd-round': stage.config.area_design_type == '2', 'shaped': !!areaDesignShapes[$index]}" ng-show="settings.bleedLine" class="bleed-line" 
                                                                ng-style="{'width' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.width - 2 * stage.config.bleed_lr)),
                                                                'height' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.height - 2 * stage.config.bleed_tb)),
                                                                'left' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_lr)),
                                                                'border-radius' : calcStyle(stage.config.bleed_radius ? stage.states.scaleRange[stage.states.currentScaleIndex].ratio * stage.config.bleed_radius : 0),
                                                                'top' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_tb))}" ></div>
                                                            <div ng-class="{'nbd-round': stage.config.area_design_type == '2', 'shaped': !!areaDesignShapes[$index]}" ng-show="settings.bleedLine" class="safe-line" ng-style="{'width' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.width - 2 * stage.config.bleed_lr - 2 * stage.config.margin_lr)),
                                                                'height' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.height - 2 * stage.config.bleed_tb - 2 * stage.config.margin_tb)),
                                                                'left' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_lr+stage.config.margin_lr)),
                                                                'border-radius' : calcStyle(stage.config.hasOwnProperty( 'safezone_radius' )? ((stage.states.scaleRange[stage.states.currentScaleIndex].ratio * stage.config.safezone_radius > 0) ? (stage.states.scaleRange[stage.states.currentScaleIndex].ratio * stage.config.safezone_radius) : 10) : 0 ),
                                                                'top' : calcStyle(stage.states.scaleRange[stage.states.currentScaleIndex].ratio * (stage.config.bleed_tb+stage.config.margin_tb))}" ></div>
                                                            <div class="sticker-contour-wrap" ng-class="{'active': stickerCutline.active}" ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="stage-overlay">
                                                    <img ng-if="stage.config.show_overlay == '1'" ng-src='{{stage.config.img_overlay}}'/>
                                                </div>
                                            </div>
                                            <div class="page-toolbar">
                                                <div class="page-main">
                                                    <ul>
                                                        <li ng-class="$index == 0 ? 'disabled' : ''" ng-click="switchStage($index, 'prev')"><i class="icon-nbd icon-nbd-arrow-upward" title="Prev Page"></i></li>
                                                        <li><span class="nbd-font-size-14">{{$index + 1}}/{{stages.length}}</span></li>
                                                        <li ng-class="$index == (stages.length - 1) ? 'disabled' : ''" ng-click="switchStage($index, 'next')"><i class="icon-nbd icon-nbd-arrow-upward rotate-180" title="Next Page"></i></li>
                                                        <li  ng-show="settings.dynamicStage" ng-click="addStage()"><i class="icon-nbd icon-nbd-content-copy" title="Add page"></i></li>
                                                        <li><i nbd-clear-stage class="icon-nbd icon-nbd-refresh" title="Clear Design"></i></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div> 
                                        <div class="nbd-prevent-event guide-backdrop"></div>
                                        <div ng-repeat="line in stage.rulerLines.hors" ng-style="calcStyleGuideline(line, stage.config, stage.states.scaleRange[stage.states.currentScaleIndex].ratio, 'hor')" data-cwidth="{{stage.config.cwidth}}" data-ratio="{{stage.states.scaleRange[stage.states.currentScaleIndex].ratio}}" data-offset="line.top" class="ruler-guideline-hor" ruler-guideline="hor"></div>
                                        <div ng-repeat="line in stage.rulerLines.vers" ng-style="calcStyleGuideline(line, stage.config, stage.states.scaleRange[stage.states.currentScaleIndex].ratio, 'ver')" data-cwidth="{{stage.config.cwidth}}" data-ratio="{{stage.states.scaleRange[stage.states.currentScaleIndex].ratio}}" data-offset="line.left" class="ruler-guideline-ver" ruler-guideline="ver"></div>            
                                    </div>
                                </div>
                                <div class="nbd-guidelines-notice">
                                    <div ng-show="settings.bleedLine && !settings.is_mobile" class="nbd-guideline-bleedline" >
                                        <span class="nbd-popup-trigger" data-popup="popup-nbd-bleedline-popup">Cut line<i class="icon-nbd icon-nbd-info-circle"></i></span>
                                    </div>
                                    <div ng-show="settings.bleedLine && !settings.is_mobile"class="nbd-guideline-safezone" >
                                        <span class="nbd-popup-trigger" data-popup="popup-nbd-bleedline-popup">Safe zone<i class="icon-nbd icon-nbd-info-circle"></i></span>
                                    </div>
                                    <div ng-show="stages[currentStage].states.lostCharLayers.length > 0" class="nbd-guideline-warning" ng-click="alertLostChar()">
                                        <span class="nbd-warning-inner" nbd-popup-trigger data-popup="popup-nbd-warning-font">Warning<i class="icon-nbd icon-nbd-baseline-warning"></i></span>
                                    </div>
                                </div>
                                <div class="nbd-toolbar-zoom fullscreen-stage-nav">
                                    <div class="zoomer">
                                        <div class="zoomer-toolbar">
                                            <ul class="nbd-main-menu">
                                                <li class="menu-item zoomer-item zoomer-fullscreen" ng-click="exitFullscreenMode()"><i class="icon-nbd icon-nbd-fullscreen"></i></li>
                                                <li class="menu-item" ng-click="switchStage(currentStage, 'prev')" ng-class="currentStage > 0 ? '' : 'nbd-disabled'"><i class="icon-nbd icon-nbd-arrow-upward rotate-90"></i></li>
                                                <li class="menu-item zoomer-item zoomer-level nbd-prevent-select">{{currentStage+1}}/{{stages.length}}</li>
                                                <li class="menu-item" ng-click="switchStage(currentStage, 'next')" ng-class="currentStage < (stages.length - 1) ? '' : 'nbd-disabled'"><i class="icon-nbd icon-nbd-arrow-upward rotate90"></i></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="nbd-stages-nav toggle-down" ng-show="!settings.is_mobile">
                                    <div class="nbd-stages-nav-wrapper">
                                        <div class="nbd-stages-nav-inner">
                                            <span class="nbd-stage-thumb stage-nav">
                                                <span ng-class="currentStage == 0 ? 'nbd-disabled' : ''" ng-click="switchStage(currentStage, 'prev', 'left-right')">
                                                    <i class="icon-nbd icon-nbd-fomat-top-left rotate-135 tooltipstered"></i>
                                                </span>
                                            </span>
                                            <span class="nbd-stage-thumb stage-name">{{stages[currentStage].config.name}}</span>
                                            <span class="nbd-stage-thumb stage-nav">
                                                <span ng-class="currentStage == (stages.length - 1) ? 'nbd-disabled' : ''" ng-click="switchStage(currentStage, 'next', 'left-right')">
                                                    <i class="icon-nbd icon-nbd-fomat-top-left rotate45 tooltipstered"></i>
                                                </span>
                                            </span>
                                        </div>
                                        <div class="nbd-stages-nav-toggle">
                                            <div class="nbd-stages-nav-toggle-inner">
                                                <svg viewBox="0 0 93 15.9" width="93" xmlns="http://www.w3.org/2000/svg"><path fill="#d0d6dd" d="M91.3,15.7c-2.1-0.4-4-2-5.6-4.6l-1.1-1.9c-3.5-6-8.2-9.4-13.2-9.4H21.5c-4.9,0-9.7,3.4-13.2,9.4l-1.1,1.9 c-1.6,2.7-3.7,4.4-5.9,4.6v0.1L91.3,15.7L91.3,15.7z"/></svg>
                                                <svg class="toggle-direction" id="toggle-direction" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24">
                                                    <path d="M7.7 11.7l4.3-4.3 4.3 4.3c0.2 0.2 0.5 0.3 0.7 0.3s0.5-0.1 0.7-0.3c0.4-0.4 0.4-1 0-1.4l-5-5c-0.4-0.4-1-0.4-1.4 0l-5 5c-0.4 0.4-0.4 1 0 1.4s1 0.4 1.4 0z"></path>
                                                    <path d="M12.7 12.3c-0.4-0.4-1-0.4-1.4 0l-5 5c-0.4 0.4-0.4 1 0 1.4s1 0.4 1.4 0l4.3-4.3 4.3 4.3c0.2 0.2 0.5 0.3 0.7 0.3s0.5-0.1 0.7-0.3c0.4-0.4 0.4-1 0-1.4l-5-5z"></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end mordern stages -->  

                            <!-- include 'modern/toolbar-zoom.php'; -->
                            <div class="nbd-toolbar-zoom">
                                <div class="zoomer">
                                    <div class="zoomer-toolbar">
                                        <ul class="nbd-main-menu">
                                            <li class="menu-item zoomer-item zoomer-fullscreen" ng-click="enableFullScreenMode()"><i class="icon-nbd icon-nbd-fullscreen"></i></li>
                                            <li class="menu-item zoomer-item zoomer-out" ng-click="zoomStage(stages[currentStage].states.currentScaleIndex - 1)" ng-class="stages[currentStage].states.currentScaleIndex > 0 ? '' : 'nbd-disabled'"><i class="icon-nbd icon-nbd-remove"></i></li>
                                            <li class="menu-item zoomer-item zoomer-level">
                                                <span>{{stages[currentStage].states.scaleRange[stages[currentStage].states.currentScaleIndex].value}}</span>
                                                <div class="sub-menu zoomer-popover" data-pos="center">
                                                    <ul class="zoomer-popover-list">
                                                        <li ng-hide="s.label == 'Fit' || s.label == 'Fill' || s.label == 'Print Size'" ng-click="zoomStage($index)" ng-class="stages[currentStage].states.currentScaleIndex == $index ? 'active' : ''" ng-repeat="s in stages[currentStage].states.scaleRange" class="zoomer-popover-item">{{s.label}}</li>
                                                        <li ng-show="stages[currentStage].states.printScaleIndex > -1" ng-click="zoomStage(stages[currentStage].states.printScaleIndex)" ng-class="stages[currentStage].states.printScaleIndex == stages[currentStage].states.currentScaleIndex ? 'active' : ''" class="zoomer-popover-item">Print Size</li>
                                                        <li ng-click="zoomStage(stages[currentStage].states.fitScaleIndex)" ng-class="stages[currentStage].states.fitScaleIndex == stages[currentStage].states.currentScaleIndex ? 'active' : ''" class="zoomer-popover-item">Fit</li>
                                                        <li ng-show="stages[currentStage].states.fillScaleIndex > -1" ng-click="zoomStage(stages[currentStage].states.fillScaleIndex)" ng-class="stages[currentStage].states.fillScaleIndex == stages[currentStage].states.currentScaleIndex ? 'active' : ''" class="zoomer-popover-item">Fill</li>
                                                    </ul>
                                                </div>
                                            </li>
                                            <li ng-click="zoomStage(stages[currentStage].states.currentScaleIndex + 1)" ng-class="stages[currentStage].states.currentScaleIndex < (stages[currentStage].states.scaleRange.length - 1) ? '' : 'nbd-disabled'" class="menu-item zoomer-item zoomer-in"><i class="icon-nbd icon-nbd-add-black"></i></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- end mordern zoom -->

                            <!-- modern/warning -->
                            <div class="nbd-warning" ng-class="( (settings.showWarning.oos && stages[currentStage].states.oos) || (settings.showWarning.ilr && stages[currentStage].states.ilr) ? 'active' : '' )">
                                <div class="item main-warning animated animate800" ng-class="settings.showWarning.oos && stages[currentStage].states.oos ? 'fadeInDown nbd-show' : 'fadeOutUp'">
                                    <span class="title-warning">Out Of Stage</span>
                                    <i class="icon-nbd icon-nbd-clear close-popup close-warning" ng-click="settings.showWarning.oos = false"></i>
                                </div>
                                <div class="item main-warning animated animate800" ng-class="settings.showWarning.ilr && stages[currentStage].states.ilr ? 'fadeInDown nbd-show' : 'fadeOutUp'">
                                    <span class="title-warning">Image Low Resolution</span>
                                    <i class="icon-nbd icon-nbd-clear close-popup close-warning" ng-click="settings.showWarning.ilr = false"></i>
                                </div>
                            </div>
                            <!-- end mordern warning -->

                            <!-- modern/context-menu -->
                            <div class="nbd-context-menu" id="nbd-context-menu" ng-style="ctxMenuStyle" ng-click="ctxMenuStyle.visibility = 'hidden'">
                                <div class="main-context">
                                    <ul class="contexts" class="layer-context" ng-if="stages[currentStage].states.isActiveLayer">
                                        <li class="context-item" ng-click="setLayerAttribute('excludeFromExport', !stages[currentStage].states.excludeFromExport)" ng-show="settings.task == 'create_template' && !stages[currentStage].states.excludeFromExport"><i class="icon-nbd icon-nbd-clear"></i> Exclude from export</li>
                                        <li class="context-item" ng-click="rotateLayer('reflect-hoz')" ng-show="stages[currentStage].states.isLayer"><i class="icon-nbd icon-nbd-reflect-horizontal"></i> Reflect Horizontal</li>
                                        <li class="context-item" ng-click="rotateLayer('reflect-ver')" ng-show="stages[currentStage].states.isLayer"><i class="icon-nbd icon-nbd-reflect-vertical"></i> Reflect Vertical</li>
                                        <li class="context-item" ng-click="fitToStage('width')" ng-show="stages[currentStage].states.isLayer && stages[currentStage].states.isImage">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="#888" width="24" height="24" viewBox="0 0 24 24">
                                                    <path d="M0.938 5.203c-0.518 0-0.938 0.42-0.938 0.938v11.719c0 0.518 0.42 0.938 0.938 0.938s0.938-0.42 0.938-0.938v-11.719c0-0.518-0.42-0.938-0.938-0.938z"></path>
                                                    <path d="M23.063 5.203c-0.518 0-0.938 0.42-0.938 0.938v11.719c0 0.518 0.42 0.938 0.938 0.938s0.938-0.42 0.938-0.938v-11.719c0-0.518-0.42-0.938-0.938-0.938z"></path>
                                                    <path d="M16.453 11.063h-12.196l2.684-2.663c0.368-0.365 0.37-0.958 0.005-1.326s-0.958-0.37-1.326-0.005l-2.914 2.89c-0.537 0.532-0.832 1.241-0.832 1.994s0.296 1.462 0.832 1.994l2.914 2.89c0.183 0.181 0.421 0.272 0.66 0.272 0.241 0 0.482-0.093 0.666-0.277 0.365-0.368 0.362-0.961-0.005-1.326l-2.59-2.569h12.102c0.518 0 0.938-0.42 0.938-0.938s-0.42-0.938-0.938-0.938z"></path>
                                                    <path d="M21.293 9.959l-2.914-2.89c-0.368-0.365-0.961-0.362-1.326 0.005s-0.362 0.961 0.005 1.326l2.914 2.89c0.179 0.178 0.278 0.413 0.278 0.663s-0.099 0.486-0.278 0.663l-2.914 2.89c-0.368 0.365-0.37 0.958-0.005 1.326 0.183 0.185 0.424 0.277 0.666 0.277 0.239 0 0.477-0.091 0.66-0.272l2.914-2.89c0.537-0.532 0.832-1.241 0.832-1.994s-0.296-1.462-0.832-1.994z"></path>
                                                </svg>
                                            </i> Fit to width
                                        </li>
                                        <li class="context-item" ng-click="fitToStage('height')" ng-show="stages[currentStage].states.isLayer && stages[currentStage].states.isImage">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="#888" width="24" height="24" viewBox="0 0 24 24">
                                                    <path d="M17.859 0h-11.719c-0.518 0-0.938 0.42-0.938 0.938s0.42 0.938 0.938 0.938h11.719c0.518 0 0.938-0.42 0.938-0.938s-0.42-0.938-0.938-0.938z"></path>
                                                    <path d="M17.859 22.125h-11.719c-0.518 0-0.938 0.42-0.938 0.938s0.42 0.938 0.938 0.938h11.719c0.518 0 0.938-0.42 0.938-0.938s-0.42-0.938-0.938-0.938z"></path>
                                                    <path d="M16.931 5.621l-2.89-2.914c-0.532-0.537-1.241-0.832-1.994-0.832s-1.462 0.296-1.994 0.832l-2.89 2.914c-0.365 0.368-0.362 0.961 0.005 1.326s0.961 0.362 1.326-0.005l2.569-2.59v12.195c0 0.518 0.42 0.938 0.938 0.938s0.938-0.42 0.938-0.938v-12.29l2.663 2.684c0.183 0.185 0.424 0.277 0.666 0.277 0.239 0 0.477-0.091 0.66-0.272 0.368-0.365 0.37-0.958 0.005-1.326z"></path>
                                                    <path d="M16.926 17.053c-0.368-0.365-0.961-0.362-1.326 0.005l-2.89 2.914c-0.178 0.179-0.413 0.278-0.663 0.278s-0.486-0.099-0.663-0.278l-2.89-2.914c-0.365-0.368-0.958-0.37-1.326-0.005s-0.37 0.958-0.005 1.326l2.89 2.914c0.532 0.537 1.241 0.832 1.994 0.832s1.462-0.296 1.994-0.832l2.89-2.914c0.365-0.368 0.362-0.961-0.005-1.326z"></path>
                                                </svg>
                                            </i> Fit to height
                                        </li>
                                        <li class="context-item" ng-click="fitToStage()" ng-show="stages[currentStage].states.isLayer && stages[currentStage].states.isImage">
                                            <i class="icon-nbd">
                                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="icon-nbd_stretch" fill="#888" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"/><path clip-path="url(#b)" fill="none" d="M0 0h24v24H0z"/></svg>
                                            </i> Stretch
                                        </li>
                                        <li class="context-item" ng-click="setAsBackground()" ng-show="stages[currentStage].states.isLayer && stages[currentStage].states.isImage && !stages[currentStage].states.isMasked">
                                            <i class="icon-nbd">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" style="vertical-align: middle; fill: #888;"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                                            </i> Set as background
                                        </li>
                                        <li class="separator" ng-show="stages[currentStage].states.isLayer"></li>
                                        <li class="context-item" ng-click="setStackPosition('bring-front')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-bring-to-front"></i> Bring to Front</li>
                                        <li class="context-item" ng-click="setStackPosition('bring-forward')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-bring-forward"></i> Bring Forward</li>
                                        <li class="context-item" ng-click="setStackPosition('send-backward')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-sent-to-backward"></i> Send to Backward</li>
                                        <li class="context-item" ng-click="setStackPosition('send-back')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-send-to-back"></i> Send to Back</li>
                                        <li class="separator" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"></li>
                                        <li class="context-item" ng-click="translateLayer('vertical')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-fomat-vertical-align-center"></i> Center horizontal</li>
                                        <li class="context-item" ng-click="translateLayer('horizontal')" ng-show="stages[currentStage].states.isLayer && !isTemplateMode"><i class="icon-nbd icon-nbd-fomat-vertical-align-center rotate90"></i> Center vertical</li>
                                        <!--  Group  -->
                                        <li class="context-item" ng-click="alignLayer('vertical')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-center rotate90"></i> Align Vertical Center</li>
                                        <li class="context-item" ng-click="alignLayer('horizontal')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-center"></i> Align Horizontal Center</li>
                                        <li class="context-item" ng-click="alignLayer('left')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-top rotate-90"></i> Align Left</li>
                                        <li class="context-item" ng-click="alignLayer('right')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-top rotate90"></i> Align Right</li>
                                        <li class="context-item" ng-click="alignLayer('top')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-top"></i> Align Top</li>
                                        <li class="context-item" ng-click="alignLayer('bottom')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-fomat-vertical-align-top rotate-180"></i> Align Bottom</li>
                                        <li class="context-item" ng-click="alignLayer('dis-horizontal')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-dis-horizontal"></i> Distribute Horizontal</li>
                                        <li class="context-item" ng-click="alignLayer('dis-vertical')" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-dis-vertical"></i> Distribute Vertical</li>
                                        <!--  Template Mode  -->
                                        <li ng-class="stages[currentStage].states.elementUpload ? 'active' : ''" ng-click="setLayerAttribute('elementUpload', !stages[currentStage].states.elementUpload)" class="context-item" ng-show="stages[currentStage].states.isImage && isTemplateMode"><i class="icon-nbd icon-nbd-replace-image"></i> Replace Image</li>
                                        <li ng-class="!stages[currentStage].states.forceLock ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('forceLock', !stages[currentStage].states.forceLock)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-lock nbd-padding-left-3"></i> Lock all adjustment
                                        </li>
                                        <li ng-class="!stages[currentStage].states.lockMask ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockMask', !stages[currentStage].states.lockMask)" ng-show="stages[currentStage].states.isImage && stages[currentStage].states.isMasked && stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px"><path fill="#888" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                                            </i> Lock mask position
                                        </li>
                                        <li ng-class="stages[currentStage].states.text.editable ? '' : 'active'" class="context-item" ng-click="setTextAttribute('editable', !stages[currentStage].states.text.editable)" ng-show="stages[currentStage].states.isText && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-lock nbd-padding-left-3"></i> Lock edit
                                        </li>
                                        <li ng-class="!stages[currentStage].states.lockMovementX ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockMovementX', !stages[currentStage].states.lockMovementX)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-arrows-h nbd-font-size-18"></i> Lock horizontal movement
                                        </li>
                                        <li ng-class="!stages[currentStage].states.lockMovementY ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockMovementY', !stages[currentStage].states.lockMovementY)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-arrows-v nbd-font-size-18 nbd-padding-left-5"></i> Lock vertical movement
                                        </li>
                                        <li ng-class="!stages[currentStage].states.lockScalingX ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockScalingX', !stages[currentStage].states.lockScalingX)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-expand horizontal horizontal-x nbd-font-size-18"><sub>x</sub></i> Lock horizontal scaling
                                        </li>     
                                        <li ng-class="!stages[currentStage].states.lockScalingY ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockScalingY', !stages[currentStage].states.lockScalingY)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-expand horizontal horizontal-y nbd-font-size-18"><sub>y</sub></i> Lock vertical scaling
                                        </li>
                                        <li ng-class="!stages[currentStage].states.lockRotation ? '' : 'active'" class="context-item" ng-click="setLayerAttribute('lockRotation', !stages[currentStage].states.lockRotation)" ng-show="stages[currentStage].states.isLayer && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-refresh rotate180"></i> Lock rotation
                                        </li>
                                        <!--  Template Mode  -->
                                        <li class="separator"></li>
                                        <li ng-if="settings.nbdesigner_enable_template_mapping == 'yes' && settings.template_fields.length > 0" class="context-item context-sub-menu" ng-show="stages[currentStage].states.isLayer && stages[currentStage].states.isText && isTemplateMode">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#888" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                                            </i> Map layer with <i class="icon-nbd icon-nbd-arrow-drop-down rotate-90 nbd-margin-left-auto" ></i>
                                            <ul class="second-contexts contexts left">
                                                <li ng-click="mapLayerWith( field.key )" ng-repeat="field in settings.template_fields" ng-class="stages[currentStage].states.field_mapping == field.key ? 'active' : ''" class="context-item">{{field.name}}</li>
                                            </ul>
                                        </li>
                                        <li class="context-item" ng-click="copyLayers()"><i class="icon-nbd icon-nbd-content-copy"></i> Duplicate</li>
                                        <li class="context-item"  ng-click="deactiveAllLayer()" ng-show="stages[currentStage].states.isGroup"><i class="icon-nbd icon-nbd-ungroup"></i> Ungroup</li>
                                        <li class="context-item" ng-click="deleteLayers()"><i class="icon-nbd icon-nbd-delete"></i> Delete</li>
                                    </ul>
                                    <ul class="contexts" class="stage-context" ng-if="!stages[currentStage].states.isActiveLayer">
                                        <li class="context-item" ng-click="copyStage()"><i class="icon-nbd icon-nbd-content-copy"></i> Copy Design</li>
                                        <li class="context-item" ng-click="pasteStage()" ng-class="!!tempStageDesign ? '' : 'disable'">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#888" d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/></svg>
                                            </i> 
                                            Paste Design
                                        </li>
                                        <li class="separator" ></li>
                                        <!-- disabled dynamic side -->
                                        <!-- <li class="context-item" ng-click="duplicateStage()" ng-class="!!settings.dynamicStage ? '' : 'disable'">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#888" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"/></svg>
                                            </i> 
                                            Duplicate Stage
                                        </li> -->
                                        <!-- <li class="context-item" ng-click="_addStage()" ng-class="!!settings.dynamicStage ? '' : 'disable'">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#888" d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"/></svg>
                                            </i>
                                            Add Stage
                                        </li>
                                        <li class="context-item" ng-click="confirmDeleteStage()" ng-class="!!settings.dynamicStage ? '' : 'disable'"><i class="icon-nbd icon-nbd-delete"></i> Delete Stage</li> -->
                                        <!-- <li class="separator" ></li> -->
                                        <li class="context-item" ng-click="showGridView()" ng-show="settings.canSwapStage">
                                            <i class="icon-nbd icon-nbd-24">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#888" d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"/></svg>
                                            </i> 
                                            Grid View
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!-- end mordern context-menu -->

                            <!-- modern/loading-workflow -->
                            <div class="loading-workflow">
                                <div class="loader">
                                    <svg class="circular" viewBox="25 25 50 50">
                                        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                    </svg>
                                </div>
                            </div>
                            <!-- end mordern loading-workflow -->

                            <!-- modern/eyedropper -->
                            <div class="nbd-eyedropper-wrap">
                                <div class="nbd-eyedropper-inner-wrap">
                                    <div class="nbd-eyedropper-info-wrap">
                                        <div class="nbd-eyedropper-color"></div>
                                        <div class="nbd-eyedropper-color-code"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- end mordern eyedropper -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup-options">

                <div class="nbd-popup popup-fileType" data-animate="bottom-to-top">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head"></div>
                        <div class="body">
                            <div class="main-body"></div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>

                <!-- popup-contents/hotkeys -->
                <div class="nbd-popup popup-keyboard" data-animate="fixed-top">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            <div class="nbd-tab-nav">
                                <ul class="nbd-tabs">
                                    <li class="nbd-tab active" data-tab="nbd-keyboard-shortcut">
                                        <span class="title">Keyboard shortcuts</span>
                                    </li>
                                    <li class="nbd-tab" data-tab="nbd-keyboard-about">
                                        <span class="title">About</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <div class="nbd-tab-contents">
                                    <div class="tab-scroll">
                                        <div id="nbd-keyboard-shortcut" class="nbd-tab-content active">
                                            <table class="keyboard-mapping">
                                                <tbody>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>A</kbd>
                                                    </td>
                                                    <td>Select all layers</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>D</kbd>
                                                    </td>
                                                    <td>Deselect all layers</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>E</kbd>
                                                    </td>
                                                    <td>Clear all layers</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Z</kbd>
                                                    </td>
                                                    <td>Undo changes</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Y</kbd>
                                                    </td>
                                                    <td>Redo changes</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>L</kbd>
                                                    </td>
                                                    <td>Show/hide Bleed line</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>R</kbd>
                                                    </td>
                                                    <td>Show/hide Ruler</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>H</kbd>
                                                    </td>
                                                    <td>Align layer horizontal center</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>+</kbd>
                                                    </td>
                                                    <td>Zoom In stage</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>-</kbd>
                                                    </td>
                                                    <td>Zoom Out stage</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>0</kbd>
                                                    </td>
                                                    <td>Fit stage with viewport</td>
                                                </tr>   
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>1</kbd>
                                                    </td>
                                                    <td>Resize stage to real size</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>]</kbd>
                                                    </td>
                                                    <td>Bring layer forward</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>[</kbd>
                                                    </td>
                                                    <td>Bring layer backward</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>O</kbd>
                                                    </td>
                                                    <td>Load your designs</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>B</kbd>
                                                    </td>
                                                    <td>Make your text bold</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>I</kbd>
                                                    </td>
                                                    <td>Italicize your text</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>G</kbd>
                                                    </td>
                                                    <td>Group layers</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>P</kbd>
                                                    </td>
                                                    <td>Duplicate layers</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>U</kbd>
                                                    </td>
                                                    <td>Make your text UPPERCASE</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>L</kbd>
                                                    </td>
                                                    <td>Make your text lowercase</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>←</kbd>
                                                    </td>
                                                    <td>Move the selected layers to left 1px</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>→</kbd>
                                                    </td>
                                                    <td>Move the selected layers to right 1px</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>↑</kbd>
                                                    </td>
                                                    <td>Move the selected layers to top 1px</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd>↓</kbd>
                                                    </td>
                                                    <td>Move the selected layers to bottom 1px</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Alt</kbd> +<kbd><i class="icon-nbd icon-nbd-arrows-v rotate-45 shortcut-free-transform"></i></kbd>
                                                    </td>
                                                    <td>Free transform</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd>+</kbd>
                                                    </td>
                                                    <td>Zoom out selected layers</td>
                                                </tr>    
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd>-</kbd>
                                                    </td>
                                                    <td>Zoom in selected layer</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd>G</kbd>
                                                    </td>
                                                    <td>Show/hide Grid</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd>D</kbd>
                                                    </td>
                                                    <td>Show/hide stage dimensions</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd>L</kbd>
                                                    </td>
                                                    <td>Clear all guidelines</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Shift</kbd> +<kbd><i class="icon-nbd icon-nbd-arrows-v rotate-45 shortcut-free-transform"></i></kbd>
                                                    </td>
                                                    <td>Centered scaling</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>←</kbd>
                                                    </td>
                                                    <td>Move the selected layers to left 10px</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>→</kbd>
                                                    </td>
                                                    <td>Move the selected layers to right 10px</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>↑</kbd>
                                                    </td>
                                                    <td>Move the selected layers to top 10px</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>↓</kbd>
                                                    </td>
                                                    <td>Move the selected layers to bottom 10px</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Delete</kbd>
                                                    </td>
                                                    <td>Delete selected layers</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>V</kbd>
                                                    </td>
                                                    <td>Disable drawing mode</td>
                                                </tr>     
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>B</kbd>
                                                    </td>
                                                    <td>Enable drawing mode</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Esc</kbd>
                                                    </td>
                                                    <td>Quit text editing</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>]</kbd>
                                                    </td>
                                                    <td>Bring layer to front</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>[</kbd>
                                                    </td>
                                                    <td>Send layer to back</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>V</kbd>
                                                    </td>
                                                    <td>Align layer vertical center</td>
                                                </tr> 
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>I</kbd>
                                                    </td>
                                                    <td>Import Design</td>
                                                </tr>     
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>E</kbd>
                                                    </td>
                                                    <td>Export Design</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>S</kbd>
                                                    </td>
                                                    <td>Save Design for later</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>O</kbd>
                                                    </td>
                                                    <td>Load Your Design in Cart</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>G</kbd>
                                                    </td>
                                                    <td>Ungroup</td>
                                                </tr>
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>L</kbd>
                                                    </td>
                                                    <td>Clear all stages</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>&lt;</kbd>
                                                    </td>
                                                    <td>Decreate font size</td>
                                                </tr>  
                                                <tr>
                                                    <td class="keys">
                                                        <kbd>Ctrl</kbd> +<kbd>Shift</kbd> +<kbd>&gt;</kbd>
                                                    </td>
                                                    <td>Increate font size</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div id="nbd-keyboard-about" class="nbd-tab-content">
                                            <div class="text-center nbd-about-logo-wrap" >
                                                <img src="./assets/image/printcart-logo.svg" style="max-width: 200px;" alt="online design">
                                            </div>
                                            <div class="copy-right">
                                                <p class="text-center">Copyright © 2022</p>
                                                <p class="text-center">All Rights Reserved</p>
                                                <p class="text-center">Powered by <b>Printcart</b></a> version 1.0.0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup hotkeys -->
                <!-- popup-contents/upload-terms -->
                <div class="nbd-popup popup-term" data-animate="fixed-top">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">Image upload terms</div>
                        <div class="body">
                            <div class="main-body">
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup upload-terms -->

                <!-- 'popup-contents/confirm-delete-layers -->
                <div class="nbd-popup popup-select clear-stage-alert" data-animate="scale">
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            Delete All Layers
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <span class="title">Are you sure you want to delete all layers?</span>
                                <div class="main-select">
                                    <button ng-click="closePopupClearStage()" class="nbd-button select-no"><i class="icon-nbd icon-nbd-clear"></i> No</button>
                                    <button ng-click="clearStage()" class="nbd-button select-yes"><i class="icon-nbd icon-nbd-fomat-done"></i> Yes</button>
                                </div>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup confirm-delete-layers -->

                <!-- 'popup-contents/alear-created-project-success -->
                <div class="nbd-popup popup-select created-project-success-alert" data-animate="scale">
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            {{messageCreatedSuccess.header}}
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <span class="title">{{messageCreatedSuccess.content}}</span>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup created-project-success -->

                <!-- popup-contents/confirm-delete-stage -->
                <div class="nbd-popup popup-select delete-stage-alert" data-animate="scale">
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            Delete Selected Stage
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <span class="title">Are you sure you want to delete selected stage?</span>
                                <div class="main-select">
                                    <button ng-click="cancelDeleteStage()" class="nbd-button select-no"><i class="icon-nbd icon-nbd-clear"></i> No</button>
                                    <button ng-click="deleteStage()" class="nbd-button select-yes"><i class="icon-nbd icon-nbd-fomat-done"></i> Yes</button>
                                </div>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup confirm-delete-stage -->

                <!-- popup-contents/confirm-clear-all -->
                <div class="nbd-popup popup-select clear-all-stage-alert" data-animate="scale">
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            Clear All Stages
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <span class="title">Are you sure you want to clear all stages?</span>
                                <div class="main-select">
                                    <button ng-click="closePopupClearAllStages()" class="nbd-button select-no"><i class="icon-nbd icon-nbd-clear"></i> No</button>
                                    <button ng-click="clearAllStage()" class="nbd-button select-yes"><i class="icon-nbd icon-nbd-fomat-done"></i> Yes</button>
                                </div>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup confirm-clear-all -->

                <!-- popup-contents/crop-image -->
                <div class="nbd-popup popup-nbd-crop" data-animate="bottom-to-top">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="overlay-main active">
                            <div class="loaded">
                                <svg class="circular" viewBox="25 25 50 50">
                                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                </svg>
                            </div>
                        </div>
                        <div class="head">
                            <h2>Crop image</h2>
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <div class="main-body-inner">
                                    <img id="crop-source" ng-if="cropObj.status" ng-src="{{cropObj.src}}" />
                                </div>
                                <div class="main-body-inner">
                                    <div class="canvas-wrap">
                                        <canvas id="crop-handle-wrap"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <button ng-click="cropImage()" class="nbd-button">Crop <i class="icon-nbd icon-nbd-fomat-done"></i></button>
                        </div>
                    </div>
                </div>
                <!-- end popup crop-image -->

                <!-- popup-contents/guidelines -->
                <div class="nbd-popup white-popup popup-nbd-bleedline-popup" data-animate="scale">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <i class="icon-nbd icon-nbd-clear close-popup"></i>
                        <div class="head">
                            <h2>Guidelines</h2>
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <p class="bleed-note">Cut Line</p>
                                <p>This is where we aim to trim the product. The actual line can vary due to the trimming process.</p>
                                <p class="safezone-note">Safe zone</p>
                                <p>Keep text and important imagery within this line to ensure it does not get cut off during trimming. </p>
                            </div>
                        </div>
                        <div class="footer"></div>
                    </div>
                </div>
                <!-- end popup guidelines -->

                <!-- popup-contents/stage-grid-view -->
                <div class="nbd-popup white-popup popup-nbd-stage-grid-view" data-animate="scale">
                    <div class="overlay-popup"></div>
                    <div class="main-popup">
                        <div class="overlay-main">
                            <div class="loaded">
                                <svg class="circular" viewBox="25 25 50 50">
                                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                                </svg>
                            </div>
                        </div>
                        <i class="icon-nbd icon-nbd-clear close-popup" ng-click="settings.gridViewMode = !settings.gridViewMode;"></i>
                        <div class="head">
                            <h2>Grid View</h2>
                        </div>
                        <div class="body">
                            <div class="main-body">
                                <div class="tab-scroll" >
                                    <stage-cell ng-repeat="stage in stages">
                                        <div title="Add" class="stage-space" stage-space data-position="{{$index}}" ng-click="maybeAddStage($index)" ng-class="($index > 0 && settings.dynamicStage) ? 'addable' : 'not-addable'">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><rect fill="#404762" height="15" width="10" x="7" y="4"/><rect fill="#404762" height="11" width="2" x="3" y="6"/><rect fill="#404762" height="11" width="2" x="19" y="6"/></svg></span>
                                        </div>
                                        <div class="stage-cell-wrap" ng-style="{'animation': settings.gridViewMode ? 'fadeInLeft ' + ($index > 5 ? 1.5 : $index * 0.3) + 's ease' : 'none', '-webkit-animation': settings.gridViewMode ? 'fadeInLeft ' + ($index > 5 ? 1.5 : $index * 0.3) + 's ease' : 'none'}">
                                            <div class="stage-cell-inner" stage-cell-inner draggable="true" data-position="{{$index}}">
                                                <div class="stage-cell-background" 
                                                    ng-style="{
                                                        'background-color': stage.config.bgType == 'image' ? '#fff' : (( stage.config.bgType == 'color' && ( ( stage.config.show_overlay == '1' && stage.config.img_overlay != '' ) || !areaDesignShapes[$index] ) )  ? stage.config.bgColor : 'transparent'),
                                                        'top': settings.product_data.product[$index].img_src_top * 150 / 500 + 'px',
                                                        'left': settings.product_data.product[$index].img_src_left * 150 / 500 + 'px',
                                                        'width': settings.product_data.product[$index].img_src_width * 150 / 500 + 'px',
                                                        'height': settings.product_data.product[$index].img_src_height * 150 / 500 + 'px'
                                                    }">
                                                    <img ng-if="stage.config.bgType == 'image'" ng-src='{{stage.config.bgImage}}'/>
                                                </div>
                                                <div class="stage-cell-design"
                                                    ng-style="{
                                                        'top': settings.product_data.product[$index].area_design_top * 150 / 500 + 'px',
                                                        'left': settings.product_data.product[$index].area_design_left * 150 / 500 + 'px',
                                                        'width': settings.product_data.product[$index].area_design_width * 150 / 500 + 'px',
                                                        'height': settings.product_data.product[$index].area_design_height * 150 / 500 + 'px'
                                                    }"
                                                >
                                                    <img ng-if="!!stage.design" ng-src="{{stage.design}}" />
                                                </div>
                                                <div class="stage-cell-overlay"
                                                    ng-style="{
                                                        'top': settings.product_data.product[$index].img_src_top * 150 / 500 + 'px',
                                                        'left': settings.product_data.product[$index].img_src_left * 150 / 500 + 'px',
                                                        'width': settings.product_data.product[$index].img_src_width * 150 / 500 + 'px',
                                                        'height': settings.product_data.product[$index].img_src_height * 150 / 500 + 'px'
                                                    }">
                                                    <img ng-if="stage.config.show_overlay == '1'" ng-src='{{stage.config.img_overlay}}'/>
                                                </div>
                                            </div>
                                            <div class="stage-cell-actions" ng-if="settings.dynamicStage">
                                                <i class="icon-nbd icon-nbd-24 stage-cell-action" ng-click="duplicateStage($index)" title="Duplicate Stage" >
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="#888" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"/></svg>
                                                </i>
                                                <span class="stage-cell-index">{{$index + 1}}</span>
                                                <i class="icon-nbd icon-nbd-delete stage-cell-action" title="Delete Stage" ng-click="confirmDeleteStage($index)"></i>
                                            </div>
                                        </div>
                                    </stage-cell>
                                    <div class="stage-space" stage-space data-position="{{stages.length}}" >
                                        <span><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><rect fill="#404762" height="15" width="10" x="7" y="4"/><rect fill="#404762" height="11" width="2" x="3" y="6"/><rect fill="#404762" height="11" width="2" x="19" y="6"/></svg></span>
                                    </div>
                                    <div title="Add More" class="stage-cell-wrap add-more-stage" ng-show="settings.dynamicStage" ng-click="_addStage( stages.length - 1 )">
                                        <i class="icon-nbd icon-nbd-add-black"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end popup stage-grid-view -->
            </div>

            <!-- modern/toasts -->
            <div class="nbd-toasts">
                <div class="toast animate300 animated">
                    <span>All changes saved</span>
                    <i class="nbd-icon icon-nbd-clear nbd-close-toast"></i>
                </div>
            </div>
            <!-- end mordern toasts -->

            <!-- modern tip -->
            <div class="nbd-tip" id="nbd-tip">
                <div class="tip-icon" ng-click="toggleTip(false)" title="Show tip">
                    <img class="tip-image" src="./assets/image/help.png" />
                </div>
                <div class="tip-content" ng-switch="tips.current">
                    <div class="tip-content-inner" ng-switch-when="1">
                        <p>- Double click to edit text
                        </p>
                        <p>- Right click on selected layers to show context menu
                        </p>
                    </div>
                    <div class="tip-content-inner" ng-switch-when="2">
                        <p>Drag & drop image from sidebar into shape layer to replace the current image.</p>
                    </div>
                    <div class="tip-content-inner" ng-switch-when="3">
                        <p>- Double click masked photo to turn on mask editing mode.
                        </p>
                        <p>- Click Apply mask icon or click outside selected mask to turn off mask editing mode.
                        </p>
                    </div>
                    <i class="icon-nbd icon-nbd-clear" ng-click="toggleTip(true)"></i>
                    <i class="icon-nbd next-tip icon-nbd-chevron-right" ng-click="nextTip()"></i>
                </div>
            </div>
            <!-- end modern tip -->

            <!-- modern/color-palette -->
            <div class="nbd-color-palette nbd-global-color-palette" id="nbd-global-color-palette">
                <div class="nbd-color-palette-inner">
                    <div class="working-palette" ng-hide="settings.hideColorPalette">
                        <h3 class="color-palette-label">Document colors</h3>
                        <ul class="main-color-palette nbd-perfect-scroll">
                            <li class="color-palette-add" ng-click="globalPicker.active = !globalPicker.active;" ng-if="settings['nbdesigner_show_all_color'] == 'yes' && !settings.is_mobile"></li>
                            <li class="color-eyedropper" ng-click="initEyeDropper2($event, true)" title="Eyedropper" ng-if="settings['nbdesigner_enable_eyedropper'] == 'yes'">
                                <span class="eyedropper-loading"></span>
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 508.8 508.8" xml:space="preserve"><g><path d="M508.324,61.2c0-16.4-6.4-31.6-18-43.2c-11.6-11.6-26.8-18-43.2-18c-16.4,0-31.6,6.4-43.2,18l-96.8,97.6 c-4.8-2.8-10-4-15.6-4c-8.4,0-16.8,3.2-22.8,9.2l-4,4c-12,12-12.4,30.8-1.6,43.6l-242,242c-13.2,13.2-16,33.6-6.8,49.6l-10.4,14 c-5.2,6.8-4.4,17.6,1.6,24l5.6,5.6c3.2,3.2,8,5.2,13.2,5.2c4,0,8-1.2,10.8-3.6l14-10.8c6,3.2,12.8,5.2,20,5.2 c11.2,0,21.6-4.4,29.2-12l241.6-241.6c6,5.2,13.2,8,21.2,8c8.4,0,16.8-3.2,22.8-9.2l4-4c10.4-10.4,12.4-26,5.2-38.4l97.2-98 C501.924,92.8,508.324,77.6,508.324,61.2z M87.124,476c-4.8,4.8-11.2,7.6-18,7.6c-4.4,0-8.8-1.2-12.4-3.2c-2.4-1.2-5.2-2-7.6-2 c-3.6,0-6.8,1.2-9.6,3.2l-14,10.8c0,0-0.8,0.4-1.2,0.4c-0.8,0-1.6-0.4-1.6-0.4l-6-6c-0.8-0.8-0.8-2.4-0.4-3.2l10.4-14 c4-5.2,4.4-12,1.2-17.6c-5.6-10-4-22.4,4-30.4l242.4-241.6l54.4,54.8L87.124,476z"/></g></svg>
                            </li>
                            <li ng-repeat="color in listAddedColor track by $index" ng-click="selectGlobalPicker(color);" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background-color': color}"></li>
                        </ul>
                    </div>
                    <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'yes'">
                        <h3 class="color-palette-label">Default palette</h3>
                        <ul class="main-color-palette" ng-repeat="palette in resource.defaultPalette">
                            <li ng-class="{'first-left': $first, 'last-right': $last, 'first-right': $index == 4,'last-left': $index == (palette.length - 5)}" ng-repeat="color in palette track by $index" ng-click="selectGlobalPicker(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                        </ul>
                    </div>
                    <div class="pinned-palette default-palette" ng-if="settings['nbdesigner_show_all_color'] == 'no'">
                        <h3 class="color-palette-label">Color palette</h3>
                        <ul class="main-color-palette">
                            <li ng-repeat="color in __colorPalette track by $index" ng-class="{'first-left': $first, 'last-right': $last, 'first-right': $index == 4,'last-left': $index == (palette.length - 5)}" ng-click="selectGlobalPicker(color)" class="color-palette-item" data-color="{{color}}" title="{{color}}" ng-style="{'background': color}"></li>
                        </ul>
                    </div>
                    <div class="nbd-text-color-picker" id="nbd-global-color-picker" ng-class="globalPicker.active ? 'active' : ''">
                        <spectrum-colorpicker
                            ng-model="globalPicker.color"
                            options="{
                                preferredFormat: 'hex',
                                flat: true,
                                showButtons: false,
                                showInput: true,
                                containerClassName: 'nbd-sp'
                        }">
                        </spectrum-colorpicker>
                        <div>
                            <button class="nbd-button" ng-click="addColor(globalPicker.color);selectGlobalPicker(globalPicker.color);">Choose</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end mordern color-palette -->
            <!-- modern/tour-guide -->
            <div class="tour-guide">
                <div class="nbd-bgTour bgTour-top"></div>
                <div class="nbd-bgTour bgTour-bottom"></div>
                <div class="nbd-bgTour bgTour-left"></div>
                <div class="nbd-bgTour bgTour-right"></div>
                <div class="nbd-tourStep nbd-show nbd-triangle" data-pos="left">
                    <div class="main-tour">
                        <i class="icon-nbd icon-nbd-clear tour-close js-tour-close" ng-click="processTourComponents('close')"></i>
                        <div class="tour-padding">
                            <ng-include src="tourGuide.steps[tourGuide.currentStep].template"></ng-include>
                        </div>
                        <div class="tour-footer">
                            <div class="tour-pagination">
                                <div class="item-pag tour-prev" ng-click="prevTour()"><span ng-if="tourGuide.currentStep > 0" class="nbd-font-size-12">Prev</span></div>
                                <div class="item-pag tour-count"><span class="step-cur">{{tourGuide.currentStep + 1}}</span> of <span class="step-total">{{tourGuide.steps.length}}</span></div>
                                <div class="item-pag tour-next" ng-click="nextTour()"><span ng-if="tourGuide.currentStep < (tourGuide.steps.length - 1)" class="nbd-font-size-12">Next</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <script type="text/ng-template" id="tour_guide.products">
                    <div class="tour-title">Products</div>
                    <div class="tour-intro">List all products on your store</div>
                </script><script type="text/ng-template" id="tour_guide.templates">
                    <div class="tour-title">Styles</div>
                    <div class="tour-intro">Choose from our state of the art Ready-to-use relevant templates which are relevant to product you have chosen to design.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.typos">
                    <div class="tour-title">Text</div>
                    <div class="tour-intro">Use our extensive font library and formatting options (Alignment, Colors, and Size) to use text in your design.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.layers">
                    <div class="tour-title">Layers</div>
                    <div class="tour-intro">A simple way to manage and drag to sort the order in layers.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.cliparts">
                    <div class="tour-title">Clip Art</div>
                    <div class="tour-intro">Choose from extensive library of ready-to-use relevant vector art (ClipArt) which you can use to create meaningful design. You can also search the vector art you are looking for by using given search box.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.elements">
                    <div class="tour-title">Elements</div>
                    <div class="tour-intro">Choose from library of different shapes, icons which are useful to create your design; Color palette is also available to change color of shape, icon.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.photos">
                    <div class="tour-title">Upload</div>
                    <div class="tour-intro">You can upload your photos and Artwork to be used in your design from here; please also through given instructions related to type if art file and size limitation.</div>
                </script>
                <script type="text/ng-template" id="tour_guide.process">
                    <div class="tour-title">Process</div>
                    <div class="tour-intro">Your design will be saved before continuing with other options or directly add to cart.</div>
                </script>
            </div>
            <!-- end mordern tour-guide -->
        </div>

        <!-- Loading page -->
        <div class="nbd-load-page">
            <div class="loader">
                <img src="./assets/image/logo_noir.png" />
            </div>
        </div>
        <script type='text/javascript' src="https://d2lp2jhrzjca64.cloudfront.net/assets/js/jquery.min.js"></script>

        <script type='text/javascript' src="https://d2lp2jhrzjca64.cloudfront.net/assets/js/jquery-ui.min.js"></script>

        <script type='text/javascript' src="https://d2lp2jhrzjca64.cloudfront.net/assets/js/angular-1.6.9.min.js"></script>

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>

        <script type="text/javascript" src="./assets/js/bundle-modern.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
        <script src="https://unpkg.com/axios@0.27.2/dist/axios.min.js"></script>
        <script type='text/javascript' src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
        <script type='text/javascript' src="https://www.gstatic.com/firebasejs/7.14.5/firebase-auth.js"></script>
        <script type='text/javascript' src="https://www.gstatic.com/firebasejs/7.14.5/firebase-database.js"></script>
        <script type="text/javascript" src="./assets/js/designer-modern.min.js"></script>
        <script type="text/javascript" src="./assets/js/app-modern.min.js"></script>
    </body>
</html>